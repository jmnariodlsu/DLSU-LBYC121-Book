<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Data Management - Cross-Sectional Data | LBOMETR Course Book</title>
  <meta name="description" content="An introduction to the LBOMETR Course Book." />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Data Management - Cross-Sectional Data | LBOMETR Course Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An introduction to the LBOMETR Course Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Data Management - Cross-Sectional Data | LBOMETR Course Book" />
  
  <meta name="twitter:description" content="An introduction to the LBOMETR Course Book." />
  

<meta name="author" content="Jem Marie M. Nario" />


<meta name="date" content="2026-01-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-introduction-to-r.html"/>
<link rel="next" href="data-management---time-series-and-panel-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<h1>LBOMETR Course Book</h1>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.1</b> About Me</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a>
<ul>
<li class="chapter" data-level="2.1" data-path="syllabus.html"><a href="syllabus.html#general-course-description"><i class="fa fa-check"></i><b>2.1</b> General Course Description</a></li>
<li class="chapter" data-level="2.2" data-path="syllabus.html"><a href="syllabus.html#specific-course-description"><i class="fa fa-check"></i><b>2.2</b> Specific Course Description</a></li>
<li class="chapter" data-level="2.3" data-path="syllabus.html"><a href="syllabus.html#final-course-outputs"><i class="fa fa-check"></i><b>2.3</b> Final Course Outputs</a></li>
<li class="chapter" data-level="2.4" data-path="syllabus.html"><a href="syllabus.html#generative-ai-use-policy"><i class="fa fa-check"></i><b>2.4</b> Generative AI-Use Policy</a></li>
<li class="chapter" data-level="2.5" data-path="syllabus.html"><a href="syllabus.html#classroom-policies"><i class="fa fa-check"></i><b>2.5</b> Classroom Policies</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="syllabus.html"><a href="syllabus.html#excused-absences-policy"><i class="fa fa-check"></i><b>2.5.1</b> EXCUSED ABSENCES POLICY:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="course-assessments.html"><a href="course-assessments.html"><i class="fa fa-check"></i><b>3</b> Course Assessments</a>
<ul>
<li class="chapter" data-level="3.1" data-path="course-assessments.html"><a href="course-assessments.html#short-quizzes"><i class="fa fa-check"></i><b>3.1</b> Short Quizzes</a></li>
<li class="chapter" data-level="3.2" data-path="course-assessments.html"><a href="course-assessments.html#problem-sets-1-and-2"><i class="fa fa-check"></i><b>3.2</b> Problem Sets (1 and 2)</a></li>
<li class="chapter" data-level="3.3" data-path="course-assessments.html"><a href="course-assessments.html#data-storytelling"><i class="fa fa-check"></i><b>3.3</b> Data Storytelling</a></li>
<li class="chapter" data-level="3.4" data-path="course-assessments.html"><a href="course-assessments.html#data-story-archive"><i class="fa fa-check"></i><b>3.4</b> Data Story Archive</a></li>
<li class="chapter" data-level="3.5" data-path="course-assessments.html"><a href="course-assessments.html#participation"><i class="fa fa-check"></i><b>3.5</b> Participation</a></li>
<li class="chapter" data-level="3.6" data-path="course-assessments.html"><a href="course-assessments.html#grading-system"><i class="fa fa-check"></i><b>3.6</b> Grading System</a></li>
<li class="chapter" data-level="3.7" data-path="course-assessments.html"><a href="course-assessments.html#grading-scale"><i class="fa fa-check"></i><b>3.7</b> Grading Scale</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="problem-sets.html"><a href="problem-sets.html"><i class="fa fa-check"></i><b>4</b> Problem Sets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="problem-sets.html"><a href="problem-sets.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="problem-sets.html"><a href="problem-sets.html#assigned-topics-list-general-and-specific"><i class="fa fa-check"></i><b>4.2</b> Assigned Topics List (General and Specific)</a></li>
<li class="chapter" data-level="4.3" data-path="problem-sets.html"><a href="problem-sets.html#problem-set-1---data-management-to-descriptive-statistics-and-conceptual-endogeneity"><i class="fa fa-check"></i><b>4.3</b> Problem Set 1 - Data Management to Descriptive Statistics and Conceptual Endogeneity</a></li>
<li class="chapter" data-level="4.4" data-path="problem-sets.html"><a href="problem-sets.html#problem-set-2---testable-hypotheses-ols-diagnostics-robustness"><i class="fa fa-check"></i><b>4.4</b> Problem Set 2 - Testable Hypotheses, OLS, Diagnostics, Robustness</a></li>
<li class="chapter" data-level="4.5" data-path="problem-sets.html"><a href="problem-sets.html#reminders"><i class="fa fa-check"></i><b>4.5</b> Reminders:</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html"><i class="fa fa-check"></i><b>5</b> Basic Introduction to R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#session-information"><i class="fa fa-check"></i><b>5.1</b> Session Information</a></li>
<li class="chapter" data-level="5.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#preliminaries"><i class="fa fa-check"></i><b>5.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#understanding-the-rstudio-screen"><i class="fa fa-check"></i><b>5.2.1</b> Understanding the RStudio Screen</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#packages"><i class="fa fa-check"></i><b>5.3</b> Packages</a></li>
<li class="chapter" data-level="5.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-up-the-working-directory"><i class="fa fa-check"></i><b>5.4</b> Setting up the Working Directory</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#what-is-a-working-directory"><i class="fa fa-check"></i><b>5.4.1</b> What is a Working Directory?</a></li>
<li class="chapter" data-level="5.4.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#required-folder-structure"><i class="fa fa-check"></i><b>5.4.2</b> Required Folder Structure</a></li>
<li class="chapter" data-level="5.4.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-the-working-directory-in-rstudio"><i class="fa fa-check"></i><b>5.4.3</b> Setting the Working Directory in RStudio</a></li>
<li class="chapter" data-level="5.4.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-the-working-directory-using-code"><i class="fa fa-check"></i><b>5.4.4</b> Setting the Working Directory Using Code</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#cleaning-the-environment-do-this-regularly"><i class="fa fa-check"></i><b>5.5</b> Cleaning the Environment (Do This Regularly)</a></li>
<li class="chapter" data-level="5.6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-markdown"><i class="fa fa-check"></i><b>5.6</b> Quarto Markdown</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#installing-quarto-in-r"><i class="fa fa-check"></i><b>5.6.1</b> Installing Quarto in R</a></li>
<li class="chapter" data-level="5.6.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#starting-a-quarto-document"><i class="fa fa-check"></i><b>5.6.2</b> Starting a Quarto Document</a></li>
<li class="chapter" data-level="5.6.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#yaml-header-use"><i class="fa fa-check"></i><b>5.6.3</b> YAML Header Use</a></li>
<li class="chapter" data-level="5.6.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-key-features"><i class="fa fa-check"></i><b>5.6.4</b> Quarto Key Features</a></li>
<li class="chapter" data-level="5.6.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-markdown-shortcuts"><i class="fa fa-check"></i><b>5.6.5</b> Quarto Markdown Shortcuts</a></li>
<li class="chapter" data-level="5.6.6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#rendering-a-quarto-document"><i class="fa fa-check"></i><b>5.6.6</b> Rendering a Quarto Document</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#working-directories-and-file-management"><i class="fa fa-check"></i><b>5.7</b> Working Directories and File Management</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#file-naming-convention-mandatory"><i class="fa fa-check"></i><b>5.7.1</b> File Naming Convention (Mandatory)</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#mini-exercise-first-quarto-render-mandatory-per-individual"><i class="fa fa-check"></i><b>5.8</b> Mini-Exercise: First Quarto Render (Mandatory per Individual)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html"><i class="fa fa-check"></i><b>6</b> Data Management - Cross-Sectional Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#where-to-get-data"><i class="fa fa-check"></i><b>6.1</b> Where to Get Data?</a></li>
<li class="chapter" data-level="6.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#preliminaries-1"><i class="fa fa-check"></i><b>6.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#packages-1"><i class="fa fa-check"></i><b>6.2.1</b> Packages</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#clean-everything"><i class="fa fa-check"></i><b>6.2.2</b> Clean Everything</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#importing-the-datasets"><i class="fa fa-check"></i><b>6.2.3</b> Importing the Datasets</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#data-cleaning"><i class="fa fa-check"></i><b>6.3</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#renaming-the-variables"><i class="fa fa-check"></i><b>6.3.1</b> Renaming the Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#sorting-variables"><i class="fa fa-check"></i><b>6.3.2</b> Sorting Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#pipe-operator"><i class="fa fa-check"></i><b>6.3.3</b> Pipe Operator</a></li>
<li class="chapter" data-level="6.3.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#adding-columns"><i class="fa fa-check"></i><b>6.3.4</b> Adding columns</a></li>
<li class="chapter" data-level="6.3.5" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#transforming-values"><i class="fa fa-check"></i><b>6.3.5</b> Transforming Values</a></li>
<li class="chapter" data-level="6.3.6" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#categorizing-into-groups"><i class="fa fa-check"></i><b>6.3.6</b> Categorizing into groups</a></li>
<li class="chapter" data-level="6.3.7" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#summarizing"><i class="fa fa-check"></i><b>6.3.7</b> Summarizing</a></li>
<li class="chapter" data-level="6.3.8" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#merging-datasets"><i class="fa fa-check"></i><b>6.3.8</b> Merging datasets</a></li>
<li class="chapter" data-level="6.3.9" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#splitting-datasets"><i class="fa fa-check"></i><b>6.3.9</b> Splitting datasets</a></li>
<li class="chapter" data-level="6.3.10" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#reshaping-datasets"><i class="fa fa-check"></i><b>6.3.10</b> Reshaping Datasets</a></li>
<li class="chapter" data-level="6.3.11" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#missing-values"><i class="fa fa-check"></i><b>6.3.11</b> Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#closing"><i class="fa fa-check"></i><b>6.4</b> Closing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html"><i class="fa fa-check"></i><b>7</b> Data Management - Time Series and Panel Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#time-series-data"><i class="fa fa-check"></i><b>7.1</b> Time Series Data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#preliminaries-2"><i class="fa fa-check"></i><b>7.1.1</b> Preliminaries</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#create-a-simple-date-dataset"><i class="fa fa-check"></i><b>7.1.2</b> Create a Simple Date Dataset</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#converting-character-dates-to-date-format"><i class="fa fa-check"></i><b>7.1.3</b> Converting Character Dates to Date Format</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#calculate-age"><i class="fa fa-check"></i><b>7.1.4</b> Calculate Age:</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#using-time-series-data"><i class="fa fa-check"></i><b>7.1.5</b> Using Time Series Data</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#convert-to-date-format"><i class="fa fa-check"></i><b>7.1.6</b> Convert to Date Format</a></li>
<li class="chapter" data-level="7.1.7" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#aggregate-data"><i class="fa fa-check"></i><b>7.1.7</b> Aggregate Data</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#panel-data"><i class="fa fa-check"></i><b>7.2</b> Panel Data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#sorting-panel-data"><i class="fa fa-check"></i><b>7.2.1</b> Sorting Panel Data</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#checking-panel-balance"><i class="fa fa-check"></i><b>7.2.2</b> Checking Panel Balance</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#creating-lagged-variables"><i class="fa fa-check"></i><b>7.2.3</b> Creating Lagged Variables</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#missing-data-in-panels"><i class="fa fa-check"></i><b>7.2.4</b> Missing Data in Panels</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#creating-growth-rates"><i class="fa fa-check"></i><b>7.2.5</b> Creating Growth Rates</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#closing-1"><i class="fa fa-check"></i><b>7.3</b> Closing</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LBOMETR Course Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-management---cross-sectional-data" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Data Management - Cross-Sectional Data<a href="data-management---cross-sectional-data.html#data-management---cross-sectional-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="where-to-get-data" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Where to Get Data?<a href="data-management---cross-sectional-data.html#where-to-get-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before we proceed to Data Management, let us first find where we can get data for the Data Story Archive. Note that the data you collect should still ensure that you are following the Code of Ethics and analyze Ethical Considerations.</p>
<p>Please view the necessary documents from the Office of the Vice Chancellor for Research and Innovation (<a href="https://www.dlsu.edu.ph/research/research-manual/" class="uri">https://www.dlsu.edu.ph/research/research-manual/</a>)</p>
<p>A list of links you can search and get data from:</p>
<p>Note: I will not include the best links as they are pretty straightforward and these are governmental databases like the ones from World Bank, IMF, UN, Philippine Statistics Authority, and Bangko Sentral ng Pilipinas. The list here is a general list but use with proper discretion.</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Link</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Awesome Public Datasets</td>
<td><a href="https://github.com/awesomedata/awesome-public-datasets" class="uri">https://github.com/awesomedata/awesome-public-datasets</a></td>
<td>This repository is filled with public datasets, mostly from International contexts.</td>
</tr>
<tr class="even">
<td>Google Dataset Search</td>
<td><a href="https://datasetsearch.research.google.com/" class="uri">https://datasetsearch.research.google.com/</a></td>
<td>You can download publicly available datasets from searching through Google. Though, sometimes the datasets come from ‘Statista.com’. You can check the sources from the search.</td>
</tr>
</tbody>
</table>
</div>
<div id="preliminaries-1" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Preliminaries<a href="data-management---cross-sectional-data.html#preliminaries-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="packages-1" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Packages<a href="data-management---cross-sectional-data.html#packages-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will mostly use the <code>tidyverse</code> package, in particular, the <code>dplyr</code> package and the <code>tidyr</code> package; double-check in your Packages list whether you have these two packages; if not, you can simply install them.</p>
</div>
<div id="clean-everything" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Clean Everything<a href="data-management---cross-sectional-data.html#clean-everything" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Do this step every time you use other data or when we do the other chapters.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-management---cross-sectional-data.html#cb17-1" tabindex="-1"></a><span class="co"># Remove all objects in the global environment</span></span>
<span id="cb17-2"><a href="data-management---cross-sectional-data.html#cb17-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb17-3"><a href="data-management---cross-sectional-data.html#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="data-management---cross-sectional-data.html#cb17-4" tabindex="-1"></a><span class="co"># Perform garbage collection to free up memory</span></span>
<span id="cb17-5"><a href="data-management---cross-sectional-data.html#cb17-5" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##           used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells 2957606 158.0    5811240 310.4  3746138 200.1
## Vcells 6358005  48.6   12255594  93.6 10143179  77.4</code></pre>
</div>
<div id="importing-the-datasets" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Importing the Datasets<a href="data-management---cross-sectional-data.html#importing-the-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before we can manage the data, we must first import it into R. There are <strong>two ways</strong> to do this:</p>
<ol style="list-style-type: decimal">
<li>Writing code (preferred for replicability)</li>
<li>Clicking in RStudio</li>
</ol>
<p>We start with the most common file types.</p>
<div id="importing-a-csv-file" class="section level4 hasAnchor" number="6.2.3.1">
<h4><span class="header-section-number">6.2.3.1</span> Importing a CSV file<a href="data-management---cross-sectional-data.html#importing-a-csv-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-management---cross-sectional-data.html#cb19-1" tabindex="-1"></a>cp_csv<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;CP_1.csv&quot;</span>)</span></code></pre></div>
<p>The file <strong>must be in the working directory</strong>. If it is not, then, simply putting the file name inside the quotation marks will not work. Meaning, you have to input the entire path where the file is.</p>
<p>Another, if you notice, the CSV file name is simple and easy to share. The <code>object</code>, in this case, <code>cp_csv</code> is also in small letters and does not have spaces but rather an underscore replacing the space. Always do this when naming objects.</p>
<p>a. Small letters</p>
<p>b. No spaces</p>
<p>c. Place underscore instead.</p>
<p>To check the information and what the dataset looks like:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-management---cross-sectional-data.html#cb20-1" tabindex="-1"></a><span class="fu">head</span>(cp_csv)</span></code></pre></div>
<pre><code>##       Country        ID HH1_Num_People HH2a_Sex HH2b_Age
## 1    Bulgaria BG1535216              3   Female       56
## 2 Netherlands NL5130211              1   Female       20
## 3 Netherlands NL5063519              2     Male       63
## 4    Slovenia SI1042916              3     Male       63
## 5    Bulgaria BG1396625              2     Male       89
## 6    Slovakia SK1184115              2   Female       44
##                               HH2d_EmploymentSituation Q1_PaidJob
## 1                       Unemployed less than 12 months        Yes
## 2 In education (at school, university, etc.) / student        Yes
## 3                                              Retired        Yes
## 4        At work as employee or employer/self-employed       &lt;NA&gt;
## 5                                              Retired        Yes
## 6        At work as employee or employer/self-employed       &lt;NA&gt;
##                      Q2_Empoyment                        Q3_Contract
## 1                            &lt;NA&gt;                               &lt;NA&gt;
## 2                            &lt;NA&gt;                               &lt;NA&gt;
## 3                            &lt;NA&gt;                               &lt;NA&gt;
## 4                        Employed On an unlimited permanent contract
## 5                            &lt;NA&gt;                               &lt;NA&gt;
## 6 Self-employed without employees On an unlimited permanent contract
##                       Q4_Occupation Q7_HoursWeekWork Q7a_AdditionalJob Q7b_HoursWeekWeekAddJob
## 1                              &lt;NA&gt;               NA              &lt;NA&gt;                      NA
## 2                              &lt;NA&gt;               NA              &lt;NA&gt;                      NA
## 3                              &lt;NA&gt;               NA              &lt;NA&gt;                      NA
## 4 Technician or junior professional               35                No                      NA
## 5                              &lt;NA&gt;               NA              &lt;NA&gt;                      NA
## 6 Technician or junior professional               43                No                      NA
##   Q7c_Work Q8_HoursWeekWorkPref Q9_HoursWeekWorkPartner Q10_HoursWeekWorkPartnerPref Q17_Rooms
## 1       No                   40                      40                            4         3
## 2       No                   10                      NA                           NA         1
## 3       No                    0                      NA                            0         6
## 4     &lt;NA&gt;                   30                      NA                           30         3
## 5       No                    0                      NA                            0         1
## 6     &lt;NA&gt;                   43                      NA                           NA         2
##                               Q18_Tenancy Q19a_ShortageSpace Q19b_Rot Q19c_Leaks
## 1                    Own without mortgage                  0        0          0
## 2                                   Other                  0        0          0
## 3                       Own with mortgage                  0        0          0
## 4 Tenant, paying rent to private landlord                  0        0          0
## 5                    Own without mortgage                  0        0          0
## 6                    Own without mortgage                  1        0          0
##   Q19d_NoFlusingToilet Q19e_NoBathShower Q19f_NoOutside Q20_LeaveAccomodation_NoAff
## 1                    0                 0              0               Very unlikely
## 2                    0                 0              0              Quite unlikely
## 3                    0                 0              0               Very unlikely
## 4                    0                 0              0              Quite unlikely
## 5                    0                 0              0               Very unlikely
## 6                    0                 0              0                 Very likely
##                      Q24_Trust Q25a_TensionClass Q25b_TensionWork Q25c_TensionSex
## 1                            6      Some tension       No tension      No tension
## 2                            6      Some tension     Some tension      No tension
## 3                            8      Some tension     Some tension      No tension
## 4                            6      Some tension     Some tension      No tension
## 5 1 - you can&#39;t be too careful      Some tension       Don”t know    Some tension
## 6                            5      Some tension     Some tension    Some tension
##   Q25d_TensionsAge Q25e_TensionRace Q25f_TensionReligion Q25g_TensionSexOrient
## 1                3     Some tension           No tension            No tension
## 2                3     Some tension         Some tension      A lot of tension
## 3                3 A lot of tension     A lot of tension          Some tension
## 4                3     Some tension         Some tension            No tension
## 5                2       Don”t know           Don”t know            Don”t know
## 6                2     Some tension         Some tension          Some tension
##   Q37a_HoursWeekChildren Q37b_HoursWeekHousework Q37c_HoursWeekElderly Q48_Education
## 1                      2                      14                    NA          1250
## 2                     NA                       7                    NA          2956
## 3                     NA                      14                     3          2963
## 4                      5                      NA                    NA          3420
## 5                     NA                      NA                    NA          1253
## 6                     NA                      20                    NA          3530
##                 Q49_Area Q50a_NeighbourhoodNoise Q50b_NeighbourhoodAir Q50c_NeighbourhoodWater
## 1 A medium to large town             No problems           No problems          Major problems
## 2  A city or city suburb             No problems           No problems             No problems
## 3 A medium to large town             No problems           No problems             No problems
## 4 A medium to large town             No problems           No problems             No problems
## 5  A city or city suburb             No problems           No problems             No problems
## 6 A medium to large town             No problems           No problems             No problems
##   Q50d_NeighbourhoodCrime Q50e_NeighbourhoodLitter Q50f_NeighbourhoodTraffic
## 1             No problems              No problems               No problems
## 2             No problems              No problems               No problems
## 3             No problems              No problems               No problems
## 4             No problems              No problems         Moderate problems
## 5       Moderate problems        Moderate problems                Don&#39;t know
## 6             No problems              No problems         Moderate problems
##   Q51a_AccServicesPost Q51b_AccServicesBank Q53c_QualityPublicTransport Income_PPP
## 1     Service not used               Easily                           6         NA
## 2               Easily With some difficulty                           7   273.4731
## 3               Easily               Easily                           7  3190.5196
## 4               Easily               Easily                           6  4171.6329
## 5     Service not used     Service not used                           3   478.3407
## 6          Very easily          Very easily                           5   759.6961</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-management---cross-sectional-data.html#cb22-1" tabindex="-1"></a><span class="fu">str</span>(cp_csv)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4036 obs. of  49 variables:
##  $ Country                     : chr  &quot;Bulgaria&quot; &quot;Netherlands&quot; &quot;Netherlands&quot; &quot;Slovenia&quot; ...
##  $ ID                          : chr  &quot;BG1535216&quot; &quot;NL5130211&quot; &quot;NL5063519&quot; &quot;SI1042916&quot; ...
##  $ HH1_Num_People              : int  3 1 2 3 2 2 2 1 4 2 ...
##  $ HH2a_Sex                    : chr  &quot;Female&quot; &quot;Female&quot; &quot;Male&quot; &quot;Male&quot; ...
##  $ HH2b_Age                    : int  56 20 63 63 89 44 52 43 47 81 ...
##  $ HH2d_EmploymentSituation    : chr  &quot;Unemployed less than 12 months&quot; &quot;In education (at school, university, etc.) / student&quot; &quot;Retired&quot; &quot;At work as employee or employer/self-employed&quot; ...
##  $ Q1_PaidJob                  : chr  &quot;Yes&quot; &quot;Yes&quot; &quot;Yes&quot; NA ...
##  $ Q2_Empoyment                : chr  NA NA NA &quot;Employed&quot; ...
##  $ Q3_Contract                 : chr  NA NA NA &quot;On an unlimited permanent contract&quot; ...
##  $ Q4_Occupation               : chr  NA NA NA &quot;Technician or junior professional&quot; ...
##  $ Q7_HoursWeekWork            : int  NA NA NA 35 NA 43 NA NA 17 NA ...
##  $ Q7a_AdditionalJob           : chr  NA NA NA &quot;No&quot; ...
##  $ Q7b_HoursWeekWeekAddJob     : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Q7c_Work                    : chr  &quot;No&quot; &quot;No&quot; &quot;No&quot; NA ...
##  $ Q8_HoursWeekWorkPref        : int  40 10 0 30 0 43 40 40 35 0 ...
##  $ Q9_HoursWeekWorkPartner     : int  40 NA NA NA NA NA 41 NA 35 NA ...
##  $ Q10_HoursWeekWorkPartnerPref: int  4 NA 0 30 0 NA 30 NA 35 0 ...
##  $ Q17_Rooms                   : int  3 1 6 3 1 2 NA 1 5 3 ...
##  $ Q18_Tenancy                 : chr  &quot;Own without mortgage&quot; &quot;Other&quot; &quot;Own with mortgage&quot; &quot;Tenant, paying rent to private landlord&quot; ...
##  $ Q19a_ShortageSpace          : int  0 0 0 0 0 1 0 0 0 0 ...
##  $ Q19b_Rot                    : int  0 0 0 0 0 0 0 1 1 0 ...
##  $ Q19c_Leaks                  : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ Q19d_NoFlusingToilet        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ Q19e_NoBathShower           : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ Q19f_NoOutside              : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ Q20_LeaveAccomodation_NoAff : chr  &quot;Very unlikely&quot; &quot;Quite unlikely&quot; &quot;Very unlikely&quot; &quot;Quite unlikely&quot; ...
##  $ Q24_Trust                   : chr  &quot;6&quot; &quot;6&quot; &quot;8&quot; &quot;6&quot; ...
##  $ Q25a_TensionClass           : chr  &quot;Some tension&quot; &quot;Some tension&quot; &quot;Some tension&quot; &quot;Some tension&quot; ...
##  $ Q25b_TensionWork            : chr  &quot;No tension&quot; &quot;Some tension&quot; &quot;Some tension&quot; &quot;Some tension&quot; ...
##  $ Q25c_TensionSex             : chr  &quot;No tension&quot; &quot;No tension&quot; &quot;No tension&quot; &quot;No tension&quot; ...
##  $ Q25d_TensionsAge            : int  3 3 3 3 2 2 98 3 3 1 ...
##  $ Q25e_TensionRace            : chr  &quot;Some tension&quot; &quot;Some tension&quot; &quot;A lot of tension&quot; &quot;Some tension&quot; ...
##  $ Q25f_TensionReligion        : chr  &quot;No tension&quot; &quot;Some tension&quot; &quot;A lot of tension&quot; &quot;Some tension&quot; ...
##  $ Q25g_TensionSexOrient       : chr  &quot;No tension&quot; &quot;A lot of tension&quot; &quot;Some tension&quot; &quot;No tension&quot; ...
##  $ Q37a_HoursWeekChildren      : int  2 NA NA 5 NA NA 4 NA NA NA ...
##  $ Q37b_HoursWeekHousework     : int  14 7 14 NA NA 20 4 8 4 6 ...
##  $ Q37c_HoursWeekElderly       : int  NA NA 3 NA NA NA NA NA NA NA ...
##  $ Q48_Education               : chr  &quot;1250&quot; &quot;2956&quot; &quot;2963&quot; &quot;3420&quot; ...
##  $ Q49_Area                    : chr  &quot;A medium to large town&quot; &quot;A city or city suburb&quot; &quot;A medium to large town&quot; &quot;A medium to large town&quot; ...
##  $ Q50a_NeighbourhoodNoise     : chr  &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; ...
##  $ Q50b_NeighbourhoodAir       : chr  &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; ...
##  $ Q50c_NeighbourhoodWater     : chr  &quot;Major problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; ...
##  $ Q50d_NeighbourhoodCrime     : chr  &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; ...
##  $ Q50e_NeighbourhoodLitter    : chr  &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; ...
##  $ Q50f_NeighbourhoodTraffic   : chr  &quot;No problems&quot; &quot;No problems&quot; &quot;No problems&quot; &quot;Moderate problems&quot; ...
##  $ Q51a_AccServicesPost        : chr  &quot;Service not used&quot; &quot;Easily&quot; &quot;Easily&quot; &quot;Easily&quot; ...
##  $ Q51b_AccServicesBank        : chr  &quot;Easily&quot; &quot;With some difficulty&quot; &quot;Easily&quot; &quot;Easily&quot; ...
##  $ Q53c_QualityPublicTransport : chr  &quot;6&quot; &quot;7&quot; &quot;7&quot; &quot;6&quot; ...
##  $ Income_PPP                  : num  NA 273 3191 4172 478 ...</code></pre>
<p>The <code>head</code> code shows the first 6 rows and all the columns (variables) in the dataset. Meanwhile the <code>str</code> code shows the information of the dataset, such as what format type each column/variable is, how many observations, etc.</p>
<p>B. Using RStudio</p>
<ol style="list-style-type: decimal">
<li>Go to <strong>Environment</strong></li>
<li>Click <strong>Import Dataset</strong></li>
<li>Choose <strong>From Text (base)</strong> or <strong>From Test (readr)</strong></li>
<li>Click <strong>Browse</strong> and select your <code>.csv</code> file</li>
<li>Click <strong>Import</strong></li>
</ol>
<p>RStudio will load the dataset and generate R code in Console. Copy the R code to your script for reproducibility.</p>
</div>
<div id="importing-an-excel-file" class="section level4 hasAnchor" number="6.2.3.2">
<h4><span class="header-section-number">6.2.3.2</span> Importing an Excel File<a href="data-management---cross-sectional-data.html#importing-an-excel-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, install and load the package:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-management---cross-sectional-data.html#cb24-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-management---cross-sectional-data.html#cb25-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-management---cross-sectional-data.html#cb26-1" tabindex="-1"></a>cp_xlsx<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;CP_1.xlsx&quot;</span>)</span></code></pre></div>
<p>If you only want a particular sheet to be imported,</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-management---cross-sectional-data.html#cb27-1" tabindex="-1"></a>cp_xlsx<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;CP_1.xlsx&quot;</span>, <span class="at">sheet=</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-management---cross-sectional-data.html#cb28-1" tabindex="-1"></a><span class="fu">head</span>(cp_xlsx)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 49
##   Country  ID    HH1_Num_People HH2a_Sex HH2b_Age HH2d_EmploymentSitua…¹ Q1_PaidJob Q2_Empoyment
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;      &lt;chr&gt;       
## 1 Bulgaria BG15…              3 Female         56 Unemployed less than … Yes        &lt;NA&gt;        
## 2 Netherl… NL51…              1 Female         20 In education (at scho… Yes        &lt;NA&gt;        
## 3 Netherl… NL50…              2 Male           63 Retired                Yes        &lt;NA&gt;        
## 4 Slovenia SI10…              3 Male           63 At work as employee o… &lt;NA&gt;       Employed    
## 5 Bulgaria BG13…              2 Male           89 Retired                Yes        &lt;NA&gt;        
## 6 Slovakia SK11…              2 Female         44 At work as employee o… &lt;NA&gt;       Self-employ…
## # ℹ abbreviated name: ¹​HH2d_EmploymentSituation
## # ℹ 41 more variables: Q3_Contract &lt;chr&gt;, Q4_Occupation &lt;chr&gt;, Q7_HoursWeekWork &lt;dbl&gt;,
## #   Q7a_AdditionalJob &lt;chr&gt;, Q7b_HoursWeekWeekAddJob &lt;dbl&gt;, Q7c_Work &lt;chr&gt;,
## #   Q8_HoursWeekWorkPref &lt;dbl&gt;, Q9_HoursWeekWorkPartner &lt;dbl&gt;,
## #   Q10_HoursWeekWorkPartnerPref &lt;dbl&gt;, Q17_Rooms &lt;dbl&gt;, Q18_Tenancy &lt;chr&gt;,
## #   Q19a_ShortageSpace &lt;dbl&gt;, Q19b_Rot &lt;dbl&gt;, Q19c_Leaks &lt;dbl&gt;, Q19d_NoFlusingToilet &lt;dbl&gt;,
## #   Q19e_NoBathShower &lt;dbl&gt;, Q19f_NoOutside &lt;dbl&gt;, Q20_LeaveAccomodation_NoAff &lt;chr&gt;, …</code></pre>
<p>B. Using RStudio</p>
<ol style="list-style-type: decimal">
<li>Go to <strong>Environment</strong></li>
<li>Click <strong>Import Dataset</strong></li>
<li>Choose <strong>From Excel</strong></li>
<li>Click <strong>Browse</strong> and select your <code>.xlsx</code> file</li>
<li>Choose the sheet</li>
<li>Click <strong>Import</strong></li>
</ol>
<p>Check that you also have the variables as the header.</p>
</div>
<div id="importing-rdata" class="section level4 hasAnchor" number="6.2.3.3">
<h4><span class="header-section-number">6.2.3.3</span> Importing RData<a href="data-management---cross-sectional-data.html#importing-rdata" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>These files are native to R and can contain multiple objects.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-management---cross-sectional-data.html#cb30-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;Dataset_CP.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-management---cross-sectional-data.html#cb31-1" tabindex="-1"></a><span class="fu">head</span>(Dataset_CP)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 49
##   Country  ID    HH1_Num_People HH2a_Sex HH2b_Age HH2d_EmploymentSitua…¹ Q1_PaidJob Q2_Empoyment
##   &lt;fct&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;                  &lt;fct&gt;      &lt;fct&gt;       
## 1 Bulgaria BG15…              3 Female         56 Unemployed less than … Yes        &lt;NA&gt;        
## 2 Netherl… NL51…              1 Female         20 In education (at scho… Yes        &lt;NA&gt;        
## 3 Netherl… NL50…              2 Male           63 Retired                Yes        &lt;NA&gt;        
## 4 Slovenia SI10…              3 Male           63 At work as employee o… &lt;NA&gt;       Employed    
## 5 Bulgaria BG13…              2 Male           89 Retired                Yes        &lt;NA&gt;        
## 6 Slovakia SK11…              2 Female         44 At work as employee o… &lt;NA&gt;       Self-employ…
## # ℹ abbreviated name: ¹​HH2d_EmploymentSituation
## # ℹ 41 more variables: Q3_Contract &lt;fct&gt;, Q4_Occupation &lt;fct&gt;, Q7_HoursWeekWork &lt;dbl&gt;,
## #   Q7a_AdditionalJob &lt;fct&gt;, Q7b_HoursWeekWeekAddJob &lt;dbl&gt;, Q7c_Work &lt;fct&gt;,
## #   Q8_HoursWeekWorkPref &lt;dbl&gt;, Q9_HoursWeekWorkPartner &lt;dbl&gt;,
## #   Q10_HoursWeekWorkPartnerPref &lt;dbl&gt;, Q17_Rooms &lt;dbl&gt;, Q18_Tenancy &lt;fct&gt;,
## #   Q19a_ShortageSpace &lt;dbl&gt;, Q19b_Rot &lt;dbl&gt;, Q19c_Leaks &lt;dbl&gt;, Q19d_NoFlusingToilet &lt;dbl&gt;,
## #   Q19e_NoBathShower &lt;dbl&gt;, Q19f_NoOutside &lt;dbl&gt;, Q20_LeaveAccomodation_NoAff &lt;fct&gt;, …</code></pre>
<p>B. Using RStudio</p>
<ol style="list-style-type: decimal">
<li>Environment panel</li>
<li>Click <strong>Import Dataset</strong></li>
<li>Choose <strong>From RData</strong></li>
<li>Select the <code>.RData</code> file</li>
<li>Click Import</li>
</ol>
</div>
</div>
</div>
<div id="data-cleaning" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Data Cleaning<a href="data-management---cross-sectional-data.html#data-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As you can see, there are 49 columns. Let’s simplify and work with fewer variables relevant for analysis. We can do this using the <code>select()</code> function in <code>dplyr</code>. We will save them into a new data frame, <code>ch2_p1.1.</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-management---cross-sectional-data.html#cb33-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-management---cross-sectional-data.html#cb34-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span><span class="ot">&lt;-</span><span class="fu">select</span>(cp_csv,</span>
<span id="cb34-2"><a href="data-management---cross-sectional-data.html#cb34-2" tabindex="-1"></a>       Country, ID, HH2a_Sex, HH2b_Age, Q1_PaidJob, Q7_HoursWeekWork, Q17_Rooms, Q49_Area, Income_PPP)</span></code></pre></div>
<p><code>select(df, var1, var2,...)</code> keeps only the listed columns and removes the rest.</p>
<div id="renaming-the-variables" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Renaming the Variables<a href="data-management---cross-sectional-data.html#renaming-the-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will edit the names to much easier conventions. First, let us say that we just want to change them to lowercase names.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-management---cross-sectional-data.html#cb35-1" tabindex="-1"></a><span class="fu">names</span>(ch2_p1<span class="fl">.1</span>)<span class="ot">&lt;-</span><span class="fu">tolower</span>(<span class="fu">names</span>(ch2_p1<span class="fl">.1</span>))</span></code></pre></div>
<p>Inspect:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-management---cross-sectional-data.html#cb36-1" tabindex="-1"></a><span class="fu">head</span>(ch2_p1<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>##       country        id hh2a_sex hh2b_age q1_paidjob q7_hoursweekwork q17_rooms
## 1    Bulgaria BG1535216   Female       56        Yes               NA         3
## 2 Netherlands NL5130211   Female       20        Yes               NA         1
## 3 Netherlands NL5063519     Male       63        Yes               NA         6
## 4    Slovenia SI1042916     Male       63       &lt;NA&gt;               35         3
## 5    Bulgaria BG1396625     Male       89        Yes               NA         1
## 6    Slovakia SK1184115   Female       44       &lt;NA&gt;               43         2
##                 q49_area income_ppp
## 1 A medium to large town         NA
## 2  A city or city suburb   273.4731
## 3 A medium to large town  3190.5196
## 4 A medium to large town  4171.6329
## 5  A city or city suburb   478.3407
## 6 A medium to large town   759.6961</code></pre>
<p>Inspect again on your own.</p>
<p>Let us rename specific columns:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-management---cross-sectional-data.html#cb38-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span><span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="data-management---cross-sectional-data.html#cb38-2" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb38-3"><a href="data-management---cross-sectional-data.html#cb38-3" tabindex="-1"></a>    <span class="at">sex =</span> hh2a_sex,</span>
<span id="cb38-4"><a href="data-management---cross-sectional-data.html#cb38-4" tabindex="-1"></a>    <span class="at">age =</span> hh2b_age,</span>
<span id="cb38-5"><a href="data-management---cross-sectional-data.html#cb38-5" tabindex="-1"></a>    <span class="at">paid_job =</span> q1_paidjob,</span>
<span id="cb38-6"><a href="data-management---cross-sectional-data.html#cb38-6" tabindex="-1"></a>    <span class="at">hours_work =</span> q7_hoursweekwork,</span>
<span id="cb38-7"><a href="data-management---cross-sectional-data.html#cb38-7" tabindex="-1"></a>    <span class="at">rooms =</span> q17_rooms,</span>
<span id="cb38-8"><a href="data-management---cross-sectional-data.html#cb38-8" tabindex="-1"></a>    <span class="at">area =</span> q49_area,</span>
<span id="cb38-9"><a href="data-management---cross-sectional-data.html#cb38-9" tabindex="-1"></a>    <span class="at">income =</span> income_ppp</span>
<span id="cb38-10"><a href="data-management---cross-sectional-data.html#cb38-10" tabindex="-1"></a>  )</span></code></pre></div>
<p>Inspect on your own.</p>
<p><code>names()</code> simply gets or sets variable names.</p>
<p><code>tolower</code> is to simply change to small letters</p>
<p><code>rename(new_name = old_name)</code> changes a column’s name without touching data</p>
<p><code>%&gt;%</code> is the pipe operator: it passes the dataset from one function to the next.</p>
</div>
<div id="sorting-variables" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Sorting Variables<a href="data-management---cross-sectional-data.html#sorting-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s say, we want to arrange <code>income</code>. We will create a different data for this. We use <code>arrange</code> or <code>desc</code> in <code>dplyr</code> package</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-management---cross-sectional-data.html#cb39-1" tabindex="-1"></a><span class="co">#Sort dataset by income, ascending (default)</span></span>
<span id="cb39-2"><a href="data-management---cross-sectional-data.html#cb39-2" tabindex="-1"></a>ch2_p1sort<span class="ot">&lt;-</span><span class="fu">arrange</span>(ch2_p1<span class="fl">.1</span>,</span>
<span id="cb39-3"><a href="data-management---cross-sectional-data.html#cb39-3" tabindex="-1"></a>                    income)</span>
<span id="cb39-4"><a href="data-management---cross-sectional-data.html#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="data-management---cross-sectional-data.html#cb39-5" tabindex="-1"></a><span class="co">#Sort dataset by income, descending</span></span>
<span id="cb39-6"><a href="data-management---cross-sectional-data.html#cb39-6" tabindex="-1"></a>ch2_p1sort_desc<span class="ot">&lt;-</span><span class="fu">arrange</span>(ch2_p1<span class="fl">.1</span>, <span class="fu">desc</span>(income))</span></code></pre></div>
<p>Inspect on your own.</p>
<div id="making-our-own-data-frame" class="section level4 hasAnchor" number="6.3.2.1">
<h4><span class="header-section-number">6.3.2.1</span> Making our own data frame<a href="data-management---cross-sectional-data.html#making-our-own-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-management---cross-sectional-data.html#cb40-1" tabindex="-1"></a>ch2_p2<span class="ot">&lt;-</span><span class="fu">data.frame</span>(</span>
<span id="cb40-2"><a href="data-management---cross-sectional-data.html#cb40-2" tabindex="-1"></a>  <span class="at">ch2_p2 =</span> <span class="fu">as.factor</span>(<span class="fu">c</span>(<span class="st">&quot;$10,000&quot;</span>, <span class="st">&quot;$20,500&quot;</span>, <span class="st">&quot;$15,250&quot;</span>, <span class="st">&quot;$30,000&quot;</span>, <span class="st">&quot;$50,750&quot;</span>))</span>
<span id="cb40-3"><a href="data-management---cross-sectional-data.html#cb40-3" tabindex="-1"></a>)</span></code></pre></div>
<p><code>c()</code> stands for combine. We’re creating a vector of values.</p>
<p><code>as.factor()</code> converts the vector into a factor, that is a categorical variable <strong>not</strong> numbers.</p>
<p><code>data.frame(...)</code> creates a dataset in R.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-management---cross-sectional-data.html#cb41-1" tabindex="-1"></a><span class="fu">head</span>(ch2_p2)</span></code></pre></div>
<pre><code>##    ch2_p2
## 1 $10,000
## 2 $20,500
## 3 $15,250
## 4 $30,000
## 5 $50,750</code></pre>
<p>Let’s sort this:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-management---cross-sectional-data.html#cb43-1" tabindex="-1"></a>ch2_p2sort<span class="ot">&lt;-</span><span class="fu">arrange</span>(ch2_p2)</span>
<span id="cb43-2"><a href="data-management---cross-sectional-data.html#cb43-2" tabindex="-1"></a><span class="fu">head</span>(ch2_p2)</span></code></pre></div>
<pre><code>##    ch2_p2
## 1 $10,000
## 2 $20,500
## 3 $15,250
## 4 $30,000
## 5 $50,750</code></pre>
<p>It did not work. The problem is, <code>ch2_p2</code> is not numeric. We can check:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-management---cross-sectional-data.html#cb45-1" tabindex="-1"></a><span class="fu">class</span>(ch2_p2<span class="sc">$</span>ch2_p2)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>We need to make it into a numeric value but we have a <code>,</code> and $. We need to remove them. We use the <code>str_replace</code> function in the <code>stringr</code> package.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-management---cross-sectional-data.html#cb47-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-management---cross-sectional-data.html#cb48-1" tabindex="-1"></a>ch2_p2<span class="sc">$</span>ch2_p2<span class="ot">&lt;-</span><span class="fu">str_replace</span>(</span>
<span id="cb48-2"><a href="data-management---cross-sectional-data.html#cb48-2" tabindex="-1"></a>  ch2_p2<span class="sc">$</span>ch2_p2, <span class="co">#column we want to edit</span></span>
<span id="cb48-3"><a href="data-management---cross-sectional-data.html#cb48-3" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&#39;,&#39;</span>, <span class="co">#what to find</span></span>
<span id="cb48-4"><a href="data-management---cross-sectional-data.html#cb48-4" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&#39;&#39;</span> <span class="co">#what to replace it with</span></span>
<span id="cb48-5"><a href="data-management---cross-sectional-data.html#cb48-5" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-management---cross-sectional-data.html#cb49-1" tabindex="-1"></a><span class="fu">head</span>(ch2_p2)</span></code></pre></div>
<pre><code>##   ch2_p2
## 1 $10000
## 2 $20500
## 3 $15250
## 4 $30000
## 5 $50750</code></pre>
<p>Now, let us remove the dollar sign; usually, simply doing the same thing we did with the comma works, but, there are some symbols that are used as “special character”. To “force” R to replace the presence of ‘$’, we add two backslashes before the dollar sign.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-management---cross-sectional-data.html#cb51-1" tabindex="-1"></a>ch2_p2<span class="sc">$</span>ch2_p2<span class="ot">&lt;-</span><span class="fu">str_replace</span>(</span>
<span id="cb51-2"><a href="data-management---cross-sectional-data.html#cb51-2" tabindex="-1"></a>  ch2_p2<span class="sc">$</span>ch2_p2, </span>
<span id="cb51-3"><a href="data-management---cross-sectional-data.html#cb51-3" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&#39;</span><span class="sc">\\</span><span class="st">$&#39;</span>,</span>
<span id="cb51-4"><a href="data-management---cross-sectional-data.html#cb51-4" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&#39;&#39;</span></span>
<span id="cb51-5"><a href="data-management---cross-sectional-data.html#cb51-5" tabindex="-1"></a>)</span></code></pre></div>
<p>Inspect on your own.</p>
<p>Now, sort <code>ch2_p2</code> on your own.</p>
<p>We can see that it was arranged, however, take a look at the way ch2_p2 was encoded; it is not numeric. So, we need to change this.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-management---cross-sectional-data.html#cb52-1" tabindex="-1"></a><span class="fu">class</span>(ch2_p2<span class="sc">$</span>ch2_p2)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Change to numeric through <code>as.numeric()</code></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-management---cross-sectional-data.html#cb54-1" tabindex="-1"></a>ch2_p2<span class="sc">$</span>ch2_p2<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(ch2_p2<span class="sc">$</span>ch2_p2)</span></code></pre></div>
<p>Inspect on your own.</p>
</div>
</div>
<div id="pipe-operator" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Pipe Operator<a href="data-management---cross-sectional-data.html#pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>%&gt;%</code> allows functions to be chained; it can be read as “then” - it tells R to do whatever comes after it to the stuff that comes before it.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-management---cross-sectional-data.html#cb55-1" tabindex="-1"></a>ch2_p1.<span class="fl">1.2</span> <span class="ot">&lt;-</span> ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="data-management---cross-sectional-data.html#cb55-2" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="data-management---cross-sectional-data.html#cb55-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(income))</span></code></pre></div>
<p>Inspect on your own.</p>
</div>
<div id="adding-columns" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Adding columns<a href="data-management---cross-sectional-data.html#adding-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will be using the pipe operator and the <code>mutate</code> to add a new column to <code>ch2_p1.1</code></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-management---cross-sectional-data.html#cb56-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span> <span class="ot">&lt;-</span> ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="data-management---cross-sectional-data.html#cb56-2" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="co">#adds a new column to the dataset</span></span>
<span id="cb56-3"><a href="data-management---cross-sectional-data.html#cb56-3" tabindex="-1"></a>    <span class="at">room_group =</span> <span class="fu">case_when</span>( <span class="co">#checks each row&#39;s value and assigned a category</span></span>
<span id="cb56-4"><a href="data-management---cross-sectional-data.html#cb56-4" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">1</span>  <span class="sc">~</span> <span class="st">&quot;one_room&quot;</span>,</span>
<span id="cb56-5"><a href="data-management---cross-sectional-data.html#cb56-5" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">2</span>  <span class="sc">~</span> <span class="st">&quot;two_rooms&quot;</span>,</span>
<span id="cb56-6"><a href="data-management---cross-sectional-data.html#cb56-6" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">3</span>  <span class="sc">~</span> <span class="st">&quot;three_rooms&quot;</span>,</span>
<span id="cb56-7"><a href="data-management---cross-sectional-data.html#cb56-7" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">4</span>  <span class="sc">~</span> <span class="st">&quot;four_rooms&quot;</span>,</span>
<span id="cb56-8"><a href="data-management---cross-sectional-data.html#cb56-8" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">5</span>  <span class="sc">~</span> <span class="st">&quot;five_rooms&quot;</span>,</span>
<span id="cb56-9"><a href="data-management---cross-sectional-data.html#cb56-9" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">6</span>  <span class="sc">~</span> <span class="st">&quot;six_rooms&quot;</span>,</span>
<span id="cb56-10"><a href="data-management---cross-sectional-data.html#cb56-10" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">7</span>  <span class="sc">~</span> <span class="st">&quot;seven_rooms&quot;</span>,</span>
<span id="cb56-11"><a href="data-management---cross-sectional-data.html#cb56-11" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">8</span>  <span class="sc">~</span> <span class="st">&quot;eight_rooms&quot;</span>,</span>
<span id="cb56-12"><a href="data-management---cross-sectional-data.html#cb56-12" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">9</span>  <span class="sc">~</span> <span class="st">&quot;nine_rooms&quot;</span>,</span>
<span id="cb56-13"><a href="data-management---cross-sectional-data.html#cb56-13" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;ten_rooms&quot;</span>,</span>
<span id="cb56-14"><a href="data-management---cross-sectional-data.html#cb56-14" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">&quot;eleven_rooms&quot;</span>,</span>
<span id="cb56-15"><a href="data-management---cross-sectional-data.html#cb56-15" tabindex="-1"></a>      rooms <span class="sc">==</span> <span class="dv">12</span> <span class="sc">~</span> <span class="st">&quot;twelve_rooms&quot;</span>,</span>
<span id="cb56-16"><a href="data-management---cross-sectional-data.html#cb56-16" tabindex="-1"></a>      <span class="cn">TRUE</span>        <span class="sc">~</span> <span class="st">&quot;other&quot;</span>        <span class="co"># anything outside 1–12 or missing</span></span>
<span id="cb56-17"><a href="data-management---cross-sectional-data.html#cb56-17" tabindex="-1"></a>    )</span>
<span id="cb56-18"><a href="data-management---cross-sectional-data.html#cb56-18" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="transforming-values" class="section level3 hasAnchor" number="6.3.5">
<h3><span class="header-section-number">6.3.5</span> Transforming Values<a href="data-management---cross-sectional-data.html#transforming-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, you can see that <code>paid_job</code> is a <code>character</code> that is “yes/no”. We need to change that to numeric value. This is particularly useful when we use dummy variables later on. We will not use <code>case_when</code> as it is not necessary; rather, we will use <code>ifelse</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-management---cross-sectional-data.html#cb57-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span><span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="data-management---cross-sectional-data.html#cb57-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-3"><a href="data-management---cross-sectional-data.html#cb57-3" tabindex="-1"></a>    <span class="at">paid_job =</span> <span class="fu">ifelse</span>(paid_job <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb57-4"><a href="data-management---cross-sectional-data.html#cb57-4" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="categorizing-into-groups" class="section level3 hasAnchor" number="6.3.6">
<h3><span class="header-section-number">6.3.6</span> Categorizing into groups<a href="data-management---cross-sectional-data.html#categorizing-into-groups" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We use the <code>case_when()</code>:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-management---cross-sectional-data.html#cb58-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span> <span class="ot">&lt;-</span> ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="data-management---cross-sectional-data.html#cb58-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="data-management---cross-sectional-data.html#cb58-3" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb58-4"><a href="data-management---cross-sectional-data.html#cb58-4" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">29</span>  <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,        <span class="co"># 18–29 years</span></span>
<span id="cb58-5"><a href="data-management---cross-sectional-data.html#cb58-5" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">59</span>  <span class="sc">~</span> <span class="st">&quot;adult&quot;</span>,        <span class="co"># 30–59 years</span></span>
<span id="cb58-6"><a href="data-management---cross-sectional-data.html#cb58-6" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">60</span>              <span class="sc">~</span> <span class="st">&quot;older_adult&quot;</span>,  <span class="co"># 60+ years</span></span>
<span id="cb58-7"><a href="data-management---cross-sectional-data.html#cb58-7" tabindex="-1"></a>      <span class="cn">TRUE</span>                   <span class="sc">~</span> <span class="st">&quot;other&quot;</span>         <span class="co"># NA</span></span>
<span id="cb58-8"><a href="data-management---cross-sectional-data.html#cb58-8" tabindex="-1"></a>    )</span>
<span id="cb58-9"><a href="data-management---cross-sectional-data.html#cb58-9" tabindex="-1"></a>  )</span></code></pre></div>
<p><code>mutate()</code> adding new column</p>
<p>The conditions are important.</p>
</div>
<div id="summarizing" class="section level3 hasAnchor" number="6.3.7">
<h3><span class="header-section-number">6.3.7</span> Summarizing<a href="data-management---cross-sectional-data.html#summarizing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let us get the average of income by age group, which we’ll call <code>ave_income</code>, by using the <code>group_by()</code> and <code>summarise()</code> functions in dplyr</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-management---cross-sectional-data.html#cb59-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span>ave<span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="data-management---cross-sectional-data.html#cb59-2" tabindex="-1"></a>  <span class="fu">group_by</span>(age_group) <span class="sc">%&gt;%</span> <span class="co">#group by age group, THEN</span></span>
<span id="cb59-3"><a href="data-management---cross-sectional-data.html#cb59-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_income=</span><span class="fu">mean</span>(income)) <span class="co">#calculate the mean of income for each age group</span></span>
<span id="cb59-4"><a href="data-management---cross-sectional-data.html#cb59-4" tabindex="-1"></a><span class="fu">head</span>(ch2_p1<span class="fl">.1</span>ave)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   age_group   ave_income
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 adult               NA
## 2 older_adult         NA
## 3 young               NA</code></pre>
<p>How did this happen? It is because there are NAs in income. Let’s check for NAs in our dataset</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-management---cross-sectional-data.html#cb61-1" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(ch2_p1<span class="fl">.1</span>))</span></code></pre></div>
<pre><code>##    country         id        sex        age   paid_job hours_work      rooms       area 
##          0          0          0          0       1768       2304         25          0 
##     income room_group  age_group 
##        978          0          0</code></pre>
<p>There are 978 NAs in income, that is why the average income is NA. For the sake of, let’s remove the NA.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-management---cross-sectional-data.html#cb63-1" tabindex="-1"></a>ch2_p1<span class="fl">.1</span>ave <span class="ot">&lt;-</span> ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="data-management---cross-sectional-data.html#cb63-2" tabindex="-1"></a>  <span class="fu">group_by</span>(age_group) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="data-management---cross-sectional-data.html#cb63-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_income =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb63-4"><a href="data-management---cross-sectional-data.html#cb63-4" tabindex="-1"></a><span class="fu">head</span>(ch2_p1<span class="fl">.1</span>ave)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   age_group   ave_income
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 adult            2145.
## 2 older_adult      1566.
## 3 young            1809.</code></pre>
<p>The difference is the inclusion of <code>na.rm = TRUE</code> which means we remove the missing values when calculating the mean.</p>
<p>So, even though we know income is numeric, the presence of NA causes the output when calculating mean, sd, etc. become NA too.</p>
</div>
<div id="merging-datasets" class="section level3 hasAnchor" number="6.3.8">
<h3><span class="header-section-number">6.3.8</span> Merging datasets<a href="data-management---cross-sectional-data.html#merging-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have two main datasets, <code>ch2_p1.1</code> and <code>ch2_p1.1ave</code>. By doing this, we could compare side-by-side each observation compared to the average per age group.</p>
<p>We will join the datasets by <code>age_group</code> variable, since that is consistent across both datasets. We name the new file as <code>ch2_p1merged</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-management---cross-sectional-data.html#cb65-1" tabindex="-1"></a>ch2_p1merged<span class="ot">&lt;-</span><span class="fu">merge</span>(<span class="at">x=</span>ch2_p1<span class="fl">.1</span>, <span class="at">y=</span>ch2_p1<span class="fl">.1</span>ave, <span class="at">by=</span><span class="st">&quot;age_group&quot;</span>)</span>
<span id="cb65-2"><a href="data-management---cross-sectional-data.html#cb65-2" tabindex="-1"></a><span class="fu">head</span>(ch2_p1merged)</span></code></pre></div>
<pre><code>##   age_group  country        id    sex age paid_job hours_work rooms                   area
## 1     adult Bulgaria BG1535216 Female  56        1         NA     3 A medium to large town
## 2     adult  Hungary HU1042815   Male  39        0         NA     2   A village/small town
## 3     adult   Poland PL1229721 Female  47       NA         40     4   A village/small town
## 4     adult  Germany DE1045717 Female  56        1         NA     3  A city or city suburb
## 5     adult  Finland FI1024310   Male  58       NA         32     5 A medium to large town
## 6     adult Slovakia SK1184115 Female  44       NA         43     2 A medium to large town
##      income  room_group ave_income
## 1        NA three_rooms   2145.059
## 2  987.0490   two_rooms   2145.059
## 3 1722.0737  four_rooms   2145.059
## 4        NA three_rooms   2145.059
## 5 3958.9271  five_rooms   2145.059
## 6  759.6961   two_rooms   2145.059</code></pre>
</div>
<div id="splitting-datasets" class="section level3 hasAnchor" number="6.3.9">
<h3><span class="header-section-number">6.3.9</span> Splitting datasets<a href="data-management---cross-sectional-data.html#splitting-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Say I want to save different datasets based on the <code>age_group</code> column.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-management---cross-sectional-data.html#cb67-1" tabindex="-1"></a>adult_data<span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age_group<span class="sc">==</span><span class="st">&quot;adult&quot;</span>)</span></code></pre></div>
<p><code>filter()</code> keeps rows that meet the condition.</p>
<p>You can save it as a <code>.csv</code> file:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-management---cross-sectional-data.html#cb68-1" tabindex="-1"></a><span class="fu">write.csv</span>(adult_data, <span class="st">&quot;adult_data.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Can you do the others? (young or older_adult)</p>
</div>
<div id="reshaping-datasets" class="section level3 hasAnchor" number="6.3.10">
<h3><span class="header-section-number">6.3.10</span> Reshaping Datasets<a href="data-management---cross-sectional-data.html#reshaping-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s say you want to reshape <code>income</code> and <code>hours_work</code> into a long format so every row is a variable measurement. We need both <code>tidyr</code> and <code>dplyr</code> packages.</p>
<div id="long-format" class="section level4 hasAnchor" number="6.3.10.1">
<h4><span class="header-section-number">6.3.10.1</span> Long Format<a href="data-management---cross-sectional-data.html#long-format" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-management---cross-sectional-data.html#cb69-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb69-2"><a href="data-management---cross-sectional-data.html#cb69-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb69-3"><a href="data-management---cross-sectional-data.html#cb69-3" tabindex="-1"></a></span>
<span id="cb69-4"><a href="data-management---cross-sectional-data.html#cb69-4" tabindex="-1"></a>ch2_long<span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="data-management---cross-sectional-data.html#cb69-5" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb69-6"><a href="data-management---cross-sectional-data.html#cb69-6" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(hours_work, income), <span class="co"># columns to stack</span></span>
<span id="cb69-7"><a href="data-management---cross-sectional-data.html#cb69-7" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="co">#new column for variable names</span></span>
<span id="cb69-8"><a href="data-management---cross-sectional-data.html#cb69-8" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span> <span class="co">#new column for their values</span></span>
<span id="cb69-9"><a href="data-management---cross-sectional-data.html#cb69-9" tabindex="-1"></a>  )</span>
<span id="cb69-10"><a href="data-management---cross-sectional-data.html#cb69-10" tabindex="-1"></a><span class="fu">head</span>(ch2_long)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   country     id        sex      age paid_job rooms area     room_group age_group variable value
##   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;
## 1 Bulgaria    BG1535216 Female    56        1     3 A mediu… three_roo… adult     hours_w…   NA 
## 2 Bulgaria    BG1535216 Female    56        1     3 A mediu… three_roo… adult     income     NA 
## 3 Netherlands NL5130211 Female    20        1     1 A city … one_room   young     hours_w…   NA 
## 4 Netherlands NL5130211 Female    20        1     1 A city … one_room   young     income    273.
## 5 Netherlands NL5063519 Male      63        1     6 A mediu… six_rooms  older_ad… hours_w…   NA 
## 6 Netherlands NL5063519 Male      63        1     6 A mediu… six_rooms  older_ad… income   3191.</code></pre>
<p><code>pivot_longer()</code> turns columns into rows</p>
</div>
<div id="wide-format" class="section level4 hasAnchor" number="6.3.10.2">
<h4><span class="header-section-number">6.3.10.2</span> Wide Format<a href="data-management---cross-sectional-data.html#wide-format" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-management---cross-sectional-data.html#cb71-1" tabindex="-1"></a>ch2_wide<span class="ot">&lt;-</span>ch2_long <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="data-management---cross-sectional-data.html#cb71-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb71-3"><a href="data-management---cross-sectional-data.html#cb71-3" tabindex="-1"></a>    <span class="at">names_from =</span> variable, <span class="co">#column to spread to multiple columns</span></span>
<span id="cb71-4"><a href="data-management---cross-sectional-data.html#cb71-4" tabindex="-1"></a>    <span class="at">values_from =</span> value <span class="co">#value to fill columns</span></span>
<span id="cb71-5"><a href="data-management---cross-sectional-data.html#cb71-5" tabindex="-1"></a>  )</span>
<span id="cb71-6"><a href="data-management---cross-sectional-data.html#cb71-6" tabindex="-1"></a><span class="fu">head</span>(ch2_wide)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   country     id        sex      age paid_job rooms area  room_group age_group hours_work income
##   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 Bulgaria    BG1535216 Female    56        1     3 A me… three_roo… adult             NA    NA 
## 2 Netherlands NL5130211 Female    20        1     1 A ci… one_room   young             NA   273.
## 3 Netherlands NL5063519 Male      63        1     6 A me… six_rooms  older_ad…         NA  3191.
## 4 Slovenia    SI1042916 Male      63       NA     3 A me… three_roo… older_ad…         35  4172.
## 5 Bulgaria    BG1396625 Male      89        1     1 A ci… one_room   older_ad…         NA   478.
## 6 Slovakia    SK1184115 Female    44       NA     2 A me… two_rooms  adult             43   760.</code></pre>
<p>Say you want to analyze repeated categories or measures. We can pivot the <code>room_group</code> and <code>age_group</code> to long:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-management---cross-sectional-data.html#cb73-1" tabindex="-1"></a>ch2_long2<span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="data-management---cross-sectional-data.html#cb73-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb73-3"><a href="data-management---cross-sectional-data.html#cb73-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(room_group, age_group),</span>
<span id="cb73-4"><a href="data-management---cross-sectional-data.html#cb73-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;category&quot;</span>,</span>
<span id="cb73-5"><a href="data-management---cross-sectional-data.html#cb73-5" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;group&quot;</span></span>
<span id="cb73-6"><a href="data-management---cross-sectional-data.html#cb73-6" tabindex="-1"></a>  )</span>
<span id="cb73-7"><a href="data-management---cross-sectional-data.html#cb73-7" tabindex="-1"></a><span class="fu">head</span>(ch2_long2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   country     id        sex      age paid_job hours_work rooms area        income category group
##   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt;      &lt;int&gt; &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;
## 1 Bulgaria    BG1535216 Female    56        1         NA     3 A medium t…    NA  room_gr… thre…
## 2 Bulgaria    BG1535216 Female    56        1         NA     3 A medium t…    NA  age_gro… adult
## 3 Netherlands NL5130211 Female    20        1         NA     1 A city or …   273. room_gr… one_…
## 4 Netherlands NL5130211 Female    20        1         NA     1 A city or …   273. age_gro… young
## 5 Netherlands NL5063519 Male      63        1         NA     6 A medium t…  3191. room_gr… six_…
## 6 Netherlands NL5063519 Male      63        1         NA     6 A medium t…  3191. age_gro… olde…</code></pre>
</div>
</div>
<div id="missing-values" class="section level3 hasAnchor" number="6.3.11">
<h3><span class="header-section-number">6.3.11</span> Missing Values<a href="data-management---cross-sectional-data.html#missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We already did it before but just to remind:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-management---cross-sectional-data.html#cb75-1" tabindex="-1"></a><span class="co">#Count missing values per column</span></span>
<span id="cb75-2"><a href="data-management---cross-sectional-data.html#cb75-2" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(ch2_p1<span class="fl">.1</span>))</span></code></pre></div>
<pre><code>##    country         id        sex        age   paid_job hours_work      rooms       area 
##          0          0          0          0       1768       2304         25          0 
##     income room_group  age_group 
##        978          0          0</code></pre>
<p>When there are missing values, it reduces sample size, can bias estimates if the missingness is not random and may introduce endogeneity if the missing data is correlated with the outcome or other variables.</p>
<div id="types-of-missing-data" class="section level4 hasAnchor" number="6.3.11.1">
<h4><span class="header-section-number">6.3.11.1</span> Types of Missing Data<a href="data-management---cross-sectional-data.html#types-of-missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>MCAR - Missing Completely at Random
<ul>
<li>Missingness is unrelated to anything in the data</li>
</ul></li>
<li>MAR - Missing at Random
<ul>
<li><p>Missingness depends on <strong>observed variables</strong> but not on the missing value itself.</p></li>
<li><p>Example: younger respondents are less likely to report income.</p></li>
</ul></li>
<li>MNAR - Missing Not at Random
<ul>
<li><p>Missingness depends on the value itself</p></li>
<li><p>Example: high income people <strong>refuse</strong> to report income</p></li>
</ul></li>
</ol>
<p>If you have MCAR, safe to remove this. If MAR or MNAR, removing these can cause <strong>bias</strong>. If a variable with missing values affects the outcome and you remove it or impute incorrectly, you can create <strong>endogeneity</strong>.</p>
</div>
<div id="handling-missing-values" class="section level4 hasAnchor" number="6.3.11.2">
<h4><span class="header-section-number">6.3.11.2</span> Handling Missing Values<a href="data-management---cross-sectional-data.html#handling-missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="a.-remove-missing-observations" class="section level5 hasAnchor" number="6.3.11.2.1">
<h5><span class="header-section-number">6.3.11.2.1</span> a. Remove missing observations<a href="data-management---cross-sectional-data.html#a.-remove-missing-observations" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-management---cross-sectional-data.html#cb77-1" tabindex="-1"></a><span class="co">#Keep only rows without missing income</span></span>
<span id="cb77-2"><a href="data-management---cross-sectional-data.html#cb77-2" tabindex="-1"></a>ch2_p1<span class="fl">.2</span><span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="data-management---cross-sectional-data.html#cb77-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(income))</span></code></pre></div>
<p><code>!is.na()</code> means you are keeping rows WITHOUT missing income</p>
<p>Again, double-check because removing the missing values may bias your results</p>
</div>
<div id="b.-replace-missing-values-imputation-of-meanmedian" class="section level5 hasAnchor" number="6.3.11.2.2">
<h5><span class="header-section-number">6.3.11.2.2</span> b. Replace missing values (imputation of mean/median)<a href="data-management---cross-sectional-data.html#b.-replace-missing-values-imputation-of-meanmedian" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-management---cross-sectional-data.html#cb78-1" tabindex="-1"></a><span class="co">#replace missing income with the mean</span></span>
<span id="cb78-2"><a href="data-management---cross-sectional-data.html#cb78-2" tabindex="-1"></a>ch2_p1<span class="fl">.3</span><span class="ot">&lt;-</span>ch2_p1<span class="fl">.1</span> <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="data-management---cross-sectional-data.html#cb78-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income=</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(income), <span class="fu">mean</span>(income, <span class="at">na.rm=</span><span class="cn">TRUE</span>), income))</span></code></pre></div>
<p><code>ifelse(condition, value_if_true, value_if_false)</code> in this case, you are telling R to search income’s NA values, if there are NA values, calculate the mean income without the NAs. then, change the NAs with the calculated mean income, otherwise, keep the income as is.</p>
<p>There are advanced methods but will not be discussed.</p>
<p>You have to be careful and always check for missing data.</p>
</div>
</div>
</div>
</div>
<div id="closing" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Closing<a href="data-management---cross-sectional-data.html#closing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Quiz questions will be uploaded in Animospace.</p></li>
<li><p>You have 15 minutes to answer.</p></li>
<li><p>Clean the environment and free the memory.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-introduction-to-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-management---time-series-and-panel-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["LBOMETR_Course_Book.pdf", "LBOMETR_Course_Book.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "depth": 4
  }
});
});
</script>

</body>

</html>
