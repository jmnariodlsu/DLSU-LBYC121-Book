<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Data Management - Time Series and Panel Data | LBOMETR Course Book</title>
  <meta name="description" content="An introduction to the LBOMETR Course Book." />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Data Management - Time Series and Panel Data | LBOMETR Course Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An introduction to the LBOMETR Course Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Data Management - Time Series and Panel Data | LBOMETR Course Book" />
  
  <meta name="twitter:description" content="An introduction to the LBOMETR Course Book." />
  

<meta name="author" content="Jem Marie M. Nario" />


<meta name="date" content="2026-01-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-management---cross-sectional-data.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<h1>LBOMETR Course Book</h1>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.1</b> About Me</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a>
<ul>
<li class="chapter" data-level="2.1" data-path="syllabus.html"><a href="syllabus.html#general-course-description"><i class="fa fa-check"></i><b>2.1</b> General Course Description</a></li>
<li class="chapter" data-level="2.2" data-path="syllabus.html"><a href="syllabus.html#specific-course-description"><i class="fa fa-check"></i><b>2.2</b> Specific Course Description</a></li>
<li class="chapter" data-level="2.3" data-path="syllabus.html"><a href="syllabus.html#final-course-outputs"><i class="fa fa-check"></i><b>2.3</b> Final Course Outputs</a></li>
<li class="chapter" data-level="2.4" data-path="syllabus.html"><a href="syllabus.html#generative-ai-use-policy"><i class="fa fa-check"></i><b>2.4</b> Generative AI-Use Policy</a></li>
<li class="chapter" data-level="2.5" data-path="syllabus.html"><a href="syllabus.html#classroom-policies"><i class="fa fa-check"></i><b>2.5</b> Classroom Policies</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="syllabus.html"><a href="syllabus.html#excused-absences-policy"><i class="fa fa-check"></i><b>2.5.1</b> EXCUSED ABSENCES POLICY:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="course-assessments.html"><a href="course-assessments.html"><i class="fa fa-check"></i><b>3</b> Course Assessments</a>
<ul>
<li class="chapter" data-level="3.1" data-path="course-assessments.html"><a href="course-assessments.html#short-quizzes"><i class="fa fa-check"></i><b>3.1</b> Short Quizzes</a></li>
<li class="chapter" data-level="3.2" data-path="course-assessments.html"><a href="course-assessments.html#problem-sets-1-and-2"><i class="fa fa-check"></i><b>3.2</b> Problem Sets (1 and 2)</a></li>
<li class="chapter" data-level="3.3" data-path="course-assessments.html"><a href="course-assessments.html#data-storytelling"><i class="fa fa-check"></i><b>3.3</b> Data Storytelling</a></li>
<li class="chapter" data-level="3.4" data-path="course-assessments.html"><a href="course-assessments.html#data-story-archive"><i class="fa fa-check"></i><b>3.4</b> Data Story Archive</a></li>
<li class="chapter" data-level="3.5" data-path="course-assessments.html"><a href="course-assessments.html#participation"><i class="fa fa-check"></i><b>3.5</b> Participation</a></li>
<li class="chapter" data-level="3.6" data-path="course-assessments.html"><a href="course-assessments.html#grading-system"><i class="fa fa-check"></i><b>3.6</b> Grading System</a></li>
<li class="chapter" data-level="3.7" data-path="course-assessments.html"><a href="course-assessments.html#grading-scale"><i class="fa fa-check"></i><b>3.7</b> Grading Scale</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="problem-sets.html"><a href="problem-sets.html"><i class="fa fa-check"></i><b>4</b> Problem Sets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="problem-sets.html"><a href="problem-sets.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="problem-sets.html"><a href="problem-sets.html#assigned-topics-list-general-and-specific"><i class="fa fa-check"></i><b>4.2</b> Assigned Topics List (General and Specific)</a></li>
<li class="chapter" data-level="4.3" data-path="problem-sets.html"><a href="problem-sets.html#problem-set-1---data-management-to-descriptive-statistics-and-conceptual-endogeneity"><i class="fa fa-check"></i><b>4.3</b> Problem Set 1 - Data Management to Descriptive Statistics and Conceptual Endogeneity</a></li>
<li class="chapter" data-level="4.4" data-path="problem-sets.html"><a href="problem-sets.html#problem-set-2---testable-hypotheses-ols-diagnostics-robustness"><i class="fa fa-check"></i><b>4.4</b> Problem Set 2 - Testable Hypotheses, OLS, Diagnostics, Robustness</a></li>
<li class="chapter" data-level="4.5" data-path="problem-sets.html"><a href="problem-sets.html#reminders"><i class="fa fa-check"></i><b>4.5</b> Reminders:</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html"><i class="fa fa-check"></i><b>5</b> Basic Introduction to R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#session-information"><i class="fa fa-check"></i><b>5.1</b> Session Information</a></li>
<li class="chapter" data-level="5.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#preliminaries"><i class="fa fa-check"></i><b>5.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#understanding-the-rstudio-screen"><i class="fa fa-check"></i><b>5.2.1</b> Understanding the RStudio Screen</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#packages"><i class="fa fa-check"></i><b>5.3</b> Packages</a></li>
<li class="chapter" data-level="5.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-up-the-working-directory"><i class="fa fa-check"></i><b>5.4</b> Setting up the Working Directory</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#what-is-a-working-directory"><i class="fa fa-check"></i><b>5.4.1</b> What is a Working Directory?</a></li>
<li class="chapter" data-level="5.4.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#required-folder-structure"><i class="fa fa-check"></i><b>5.4.2</b> Required Folder Structure</a></li>
<li class="chapter" data-level="5.4.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-the-working-directory-in-rstudio"><i class="fa fa-check"></i><b>5.4.3</b> Setting the Working Directory in RStudio</a></li>
<li class="chapter" data-level="5.4.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#setting-the-working-directory-using-code"><i class="fa fa-check"></i><b>5.4.4</b> Setting the Working Directory Using Code</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#cleaning-the-environment-do-this-regularly"><i class="fa fa-check"></i><b>5.5</b> Cleaning the Environment (Do This Regularly)</a></li>
<li class="chapter" data-level="5.6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-markdown"><i class="fa fa-check"></i><b>5.6</b> Quarto Markdown</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#installing-quarto-in-r"><i class="fa fa-check"></i><b>5.6.1</b> Installing Quarto in R</a></li>
<li class="chapter" data-level="5.6.2" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#starting-a-quarto-document"><i class="fa fa-check"></i><b>5.6.2</b> Starting a Quarto Document</a></li>
<li class="chapter" data-level="5.6.3" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#yaml-header-use"><i class="fa fa-check"></i><b>5.6.3</b> YAML Header Use</a></li>
<li class="chapter" data-level="5.6.4" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-key-features"><i class="fa fa-check"></i><b>5.6.4</b> Quarto Key Features</a></li>
<li class="chapter" data-level="5.6.5" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#quarto-markdown-shortcuts"><i class="fa fa-check"></i><b>5.6.5</b> Quarto Markdown Shortcuts</a></li>
<li class="chapter" data-level="5.6.6" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#rendering-a-quarto-document"><i class="fa fa-check"></i><b>5.6.6</b> Rendering a Quarto Document</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#working-directories-and-file-management"><i class="fa fa-check"></i><b>5.7</b> Working Directories and File Management</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#file-naming-convention-mandatory"><i class="fa fa-check"></i><b>5.7.1</b> File Naming Convention (Mandatory)</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="basic-introduction-to-r.html"><a href="basic-introduction-to-r.html#mini-exercise-first-quarto-render-mandatory-per-individual"><i class="fa fa-check"></i><b>5.8</b> Mini-Exercise: First Quarto Render (Mandatory per Individual)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html"><i class="fa fa-check"></i><b>6</b> Data Management - Cross-Sectional Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#where-to-get-data"><i class="fa fa-check"></i><b>6.1</b> Where to Get Data?</a></li>
<li class="chapter" data-level="6.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#preliminaries-1"><i class="fa fa-check"></i><b>6.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#packages-1"><i class="fa fa-check"></i><b>6.2.1</b> Packages</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#clean-everything"><i class="fa fa-check"></i><b>6.2.2</b> Clean Everything</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#importing-the-datasets"><i class="fa fa-check"></i><b>6.2.3</b> Importing the Datasets</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#data-cleaning"><i class="fa fa-check"></i><b>6.3</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#renaming-the-variables"><i class="fa fa-check"></i><b>6.3.1</b> Renaming the Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#sorting-variables"><i class="fa fa-check"></i><b>6.3.2</b> Sorting Variables</a></li>
<li class="chapter" data-level="6.3.3" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#pipe-operator"><i class="fa fa-check"></i><b>6.3.3</b> Pipe Operator</a></li>
<li class="chapter" data-level="6.3.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#adding-columns"><i class="fa fa-check"></i><b>6.3.4</b> Adding columns</a></li>
<li class="chapter" data-level="6.3.5" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#transforming-values"><i class="fa fa-check"></i><b>6.3.5</b> Transforming Values</a></li>
<li class="chapter" data-level="6.3.6" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#categorizing-into-groups"><i class="fa fa-check"></i><b>6.3.6</b> Categorizing into groups</a></li>
<li class="chapter" data-level="6.3.7" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#summarizing"><i class="fa fa-check"></i><b>6.3.7</b> Summarizing</a></li>
<li class="chapter" data-level="6.3.8" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#merging-datasets"><i class="fa fa-check"></i><b>6.3.8</b> Merging datasets</a></li>
<li class="chapter" data-level="6.3.9" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#splitting-datasets"><i class="fa fa-check"></i><b>6.3.9</b> Splitting datasets</a></li>
<li class="chapter" data-level="6.3.10" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#reshaping-datasets"><i class="fa fa-check"></i><b>6.3.10</b> Reshaping Datasets</a></li>
<li class="chapter" data-level="6.3.11" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#missing-values"><i class="fa fa-check"></i><b>6.3.11</b> Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-management---cross-sectional-data.html"><a href="data-management---cross-sectional-data.html#closing"><i class="fa fa-check"></i><b>6.4</b> Closing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html"><i class="fa fa-check"></i><b>7</b> Data Management - Time Series and Panel Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#time-series-data"><i class="fa fa-check"></i><b>7.1</b> Time Series Data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#preliminaries-2"><i class="fa fa-check"></i><b>7.1.1</b> Preliminaries</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#create-a-simple-date-dataset"><i class="fa fa-check"></i><b>7.1.2</b> Create a Simple Date Dataset</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#converting-character-dates-to-date-format"><i class="fa fa-check"></i><b>7.1.3</b> Converting Character Dates to Date Format</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#calculate-age"><i class="fa fa-check"></i><b>7.1.4</b> Calculate Age:</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#using-time-series-data"><i class="fa fa-check"></i><b>7.1.5</b> Using Time Series Data</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#convert-to-date-format"><i class="fa fa-check"></i><b>7.1.6</b> Convert to Date Format</a></li>
<li class="chapter" data-level="7.1.7" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#aggregate-data"><i class="fa fa-check"></i><b>7.1.7</b> Aggregate Data</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#panel-data"><i class="fa fa-check"></i><b>7.2</b> Panel Data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#sorting-panel-data"><i class="fa fa-check"></i><b>7.2.1</b> Sorting Panel Data</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#checking-panel-balance"><i class="fa fa-check"></i><b>7.2.2</b> Checking Panel Balance</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#creating-lagged-variables"><i class="fa fa-check"></i><b>7.2.3</b> Creating Lagged Variables</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#missing-data-in-panels"><i class="fa fa-check"></i><b>7.2.4</b> Missing Data in Panels</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#creating-growth-rates"><i class="fa fa-check"></i><b>7.2.5</b> Creating Growth Rates</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-management---time-series-and-panel-data.html"><a href="data-management---time-series-and-panel-data.html#closing-1"><i class="fa fa-check"></i><b>7.3</b> Closing</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LBOMETR Course Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-management---time-series-and-panel-data" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Data Management - Time Series and Panel Data<a href="data-management---time-series-and-panel-data.html#data-management---time-series-and-panel-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="time-series-data" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Time Series Data<a href="data-management---time-series-and-panel-data.html#time-series-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Time series analysis requires correct date formats, proper chronological ordering, etc.</p>
<p>For this, we will use <a href="%22C:\Users\jemma\OneDrive\Documents\DLSU\LBOMETR_Book\Ch3Practice.csv%22">Chapter3 Practice</a> found in the Modules.</p>
<div id="preliminaries-2" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Preliminaries<a href="data-management---time-series-and-panel-data.html#preliminaries-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Always remember the first steps: Set Working Directory and Clean the Global Environment.</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-management---time-series-and-panel-data.html#cb79-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb79-2"><a href="data-management---time-series-and-panel-data.html#cb79-2" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##           used  (Mb) gc trigger  (Mb) max used  (Mb)
## Ncells 2972560 158.8    5811240 310.4  5811240 310.4
## Vcells 6393370  48.8   12255594  93.6 11855270  90.5</code></pre>
<p>To make sure that you are using the correct directory and that you have all the files you need, use <code>list.files()</code> function.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-management---time-series-and-panel-data.html#cb81-1" tabindex="-1"></a><span class="fu">list.files</span>()</span></code></pre></div>
<p>Now, we load the following packages: <code>dplyr</code>, <code>lubridate</code>, and <code>zoo</code>. Make sure you have all 3 installed; if not, install them.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-management---time-series-and-panel-data.html#cb82-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb82-2"><a href="data-management---time-series-and-panel-data.html#cb82-2" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb82-3"><a href="data-management---time-series-and-panel-data.html#cb82-3" tabindex="-1"></a><span class="fu">library</span>(zoo)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
</div>
<div id="create-a-simple-date-dataset" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Create a Simple Date Dataset<a href="data-management---time-series-and-panel-data.html#create-a-simple-date-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-management---time-series-and-panel-data.html#cb85-1" tabindex="-1"></a>date_date<span class="ot">&lt;-</span><span class="fu">data.frame</span>(</span>
<span id="cb85-2"><a href="data-management---time-series-and-panel-data.html#cb85-2" tabindex="-1"></a>  <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb85-3"><a href="data-management---time-series-and-panel-data.html#cb85-3" tabindex="-1"></a>  <span class="at">dob =</span> <span class="fu">c</span>(<span class="st">&quot;15-05-1990&quot;</span>, <span class="st">&quot;20-08-1985&quot;</span>, <span class="st">&quot;01-12-2000&quot;</span>, <span class="st">&quot;10-03-1995&quot;</span>, <span class="st">&quot;25-07-2010&quot;</span>),</span>
<span id="cb85-4"><a href="data-management---time-series-and-panel-data.html#cb85-4" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb85-5"><a href="data-management---time-series-and-panel-data.html#cb85-5" tabindex="-1"></a>)</span>
<span id="cb85-6"><a href="data-management---time-series-and-panel-data.html#cb85-6" tabindex="-1"></a></span>
<span id="cb85-7"><a href="data-management---time-series-and-panel-data.html#cb85-7" tabindex="-1"></a><span class="fu">print</span>(date_date)</span></code></pre></div>
<pre><code>##   ID        dob
## 1  1 15-05-1990
## 2  2 20-08-1985
## 3  3 01-12-2000
## 4  4 10-03-1995
## 5  5 25-07-2010</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-management---time-series-and-panel-data.html#cb87-1" tabindex="-1"></a><span class="fu">str</span>(date_date)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  2 variables:
##  $ ID : int  1 2 3 4 5
##  $ dob: chr  &quot;15-05-1990&quot; &quot;20-08-1985&quot; &quot;01-12-2000&quot; &quot;10-03-1995&quot; ...</code></pre>
<p>I wonâ€™t repeat what the code has except for new ones like <code>ID</code> which creates a numeric sequence for the ID column. <code>date_of_birth = c("15-05-1990",...)</code> are dates stored as character strings. <code>stringsAsFactors = FALSE</code> because R sometimes turns text into factors (categories) so by making it FALSE, it ensures dates remain character strings not categories</p>
<p>As seen, the <code>dob</code> is in <code>character</code> format:</p>
</div>
<div id="converting-character-dates-to-date-format" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Converting Character Dates to Date Format<a href="data-management---time-series-and-panel-data.html#converting-character-dates-to-date-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-management---time-series-and-panel-data.html#cb89-1" tabindex="-1"></a>date_date<span class="sc">$</span>dob<span class="ot">&lt;-</span> <span class="fu">as.Date</span>(</span>
<span id="cb89-2"><a href="data-management---time-series-and-panel-data.html#cb89-2" tabindex="-1"></a>  date_date<span class="sc">$</span>dob,</span>
<span id="cb89-3"><a href="data-management---time-series-and-panel-data.html#cb89-3" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">&quot;%d-%m-%Y&quot;</span></span>
<span id="cb89-4"><a href="data-management---time-series-and-panel-data.html#cb89-4" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-management---time-series-and-panel-data.html#cb90-1" tabindex="-1"></a><span class="fu">class</span>(date_date<span class="sc">$</span>dob)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>So, we converted character strings into Date objects. With this, we can calculate age, lags, etc.</p>
</div>
<div id="calculate-age" class="section level3 hasAnchor" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> Calculate Age:<a href="data-management---time-series-and-panel-data.html#calculate-age" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Say you want to calculate the age:</p>
<p>Before, we added columns through mutate; this time, we add columns through creating a new object.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-management---time-series-and-panel-data.html#cb92-1" tabindex="-1"></a>date_date<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">floor</span>((<span class="fu">Sys.Date</span>()<span class="sc">-</span>date_date<span class="sc">$</span>dob)<span class="sc">/</span><span class="fl">365.25</span>))</span></code></pre></div>
<p><code>as.Date()</code> converts strings to dates while <code>floor()</code> simply rounds down.</p>
<div id="custom-reference-date" class="section level4 hasAnchor" number="7.1.4.1">
<h4><span class="header-section-number">7.1.4.1</span> Custom Reference Date:<a href="data-management---time-series-and-panel-data.html#custom-reference-date" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-management---time-series-and-panel-data.html#cb93-1" tabindex="-1"></a>ref_date<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="st">&quot;2020-12-20&quot;</span>) <span class="co">#uses YYYY-MM-DD as ISO standard that R recognizes immediately</span></span>
<span id="cb93-2"><a href="data-management---time-series-and-panel-data.html#cb93-2" tabindex="-1"></a>date_date<span class="sc">$</span>age2<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb93-3"><a href="data-management---time-series-and-panel-data.html#cb93-3" tabindex="-1"></a>  <span class="fu">floor</span>((ref_date<span class="sc">-</span>date_date<span class="sc">$</span>dob)<span class="sc">/</span><span class="fl">365.25</span>)</span>
<span id="cb93-4"><a href="data-management---time-series-and-panel-data.html#cb93-4" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="using-time-series-data" class="section level3 hasAnchor" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> Using Time Series Data<a href="data-management---time-series-and-panel-data.html#using-time-series-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We load Daily Bitcoin Data</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-management---time-series-and-panel-data.html#cb94-1" tabindex="-1"></a>ch3_p1<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;Ch3Practice.csv&quot;</span>)</span>
<span id="cb94-2"><a href="data-management---time-series-and-panel-data.html#cb94-2" tabindex="-1"></a><span class="fu">head</span>(ch3_p1)</span></code></pre></div>
<pre><code>##           ds       y
## 1 2015-06-13 232.402
## 2 2015-06-14 233.543
## 3 2015-06-15 236.823
## 4 2015-06-16 250.895
## 5 2015-06-17 249.284
## 6 2015-06-18 249.007</code></pre>
<p>We need to understand our data;</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-management---time-series-and-panel-data.html#cb96-1" tabindex="-1"></a><span class="fu">str</span>(ch3_p1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1825 obs. of  2 variables:
##  $ ds: chr  &quot;2015-06-13&quot; &quot;2015-06-14&quot; &quot;2015-06-15&quot; &quot;2015-06-16&quot; ...
##  $ y : num  232 234 237 251 249 ...</code></pre>
</div>
<div id="convert-to-date-format" class="section level3 hasAnchor" number="7.1.6">
<h3><span class="header-section-number">7.1.6</span> Convert to Date Format<a href="data-management---time-series-and-panel-data.html#convert-to-date-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As you can see, our <code>ds</code> is what our date column is, however, it is in the <code>character</code> format. We need to convert it to the <code>Date</code> class. We also need to do this to a copy of the raw data for further modifications.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-management---time-series-and-panel-data.html#cb98-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="ot">&lt;-</span>ch3_p1</span>
<span id="cb98-2"><a href="data-management---time-series-and-panel-data.html#cb98-2" tabindex="-1"></a><span class="fu">head</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds)</span></code></pre></div>
<pre><code>## [1] &quot;2015-06-13&quot; &quot;2015-06-14&quot; &quot;2015-06-15&quot; &quot;2015-06-16&quot; &quot;2015-06-17&quot; &quot;2015-06-18&quot;</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-management---time-series-and-panel-data.html#cb100-1" tabindex="-1"></a><span class="fu">class</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-management---time-series-and-panel-data.html#cb102-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds, <span class="at">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>)</span>
<span id="cb102-2"><a href="data-management---time-series-and-panel-data.html#cb102-2" tabindex="-1"></a></span>
<span id="cb102-3"><a href="data-management---time-series-and-panel-data.html#cb102-3" tabindex="-1"></a><span class="fu">class</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
</div>
<div id="aggregate-data" class="section level3 hasAnchor" number="7.1.7">
<h3><span class="header-section-number">7.1.7</span> Aggregate Data<a href="data-management---time-series-and-panel-data.html#aggregate-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We now have <code>daily</code> data. Say we want to create weekly data, we use the <code>cut</code> function to group dates by week, month, quarter and year.</p>
<p>Since we know for sure that the <code>date</code> column is in <code>date</code> format, no need to check, however, it is always useful to check the class of <code>date</code>.</p>
<div id="aggregate-by-week" class="section level4 hasAnchor" number="7.1.7.1">
<h4><span class="header-section-number">7.1.7.1</span> Aggregate by Week<a href="data-management---time-series-and-panel-data.html#aggregate-by-week" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Add new columns for each aggregation.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-management---time-series-and-panel-data.html#cb104-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="sc">$</span>week<span class="ot">&lt;-</span><span class="fu">cut</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds, <span class="at">breaks =</span> <span class="st">&quot;week&quot;</span>)</span></code></pre></div>
<p>The <code>cut</code> is used to divide the date into intervals while the <code>breaks</code> specifies that the <code>date</code> be divided into weekly intervals.</p>
<p>Check creation of the week column</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-management---time-series-and-panel-data.html#cb105-1" tabindex="-1"></a><span class="fu">head</span>(ch3_p1<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>##           ds       y       week
## 1 2015-06-13 232.402 2015-06-08
## 2 2015-06-14 233.543 2015-06-08
## 3 2015-06-15 236.823 2015-06-15
## 4 2015-06-16 250.895 2015-06-15
## 5 2015-06-17 249.284 2015-06-15
## 6 2015-06-18 249.007 2015-06-15</code></pre>
<p>Since we have the <code>y</code> column which is actually Bitcoin Price, we need to aggregate that weekly using the <code>aggregate</code> function</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-management---time-series-and-panel-data.html#cb107-1" tabindex="-1"></a>week_y<span class="ot">&lt;-</span><span class="fu">aggregate</span>(y <span class="sc">~</span> week, <span class="co">#refers to column for bitcoin</span></span>
<span id="cb107-2"><a href="data-management---time-series-and-panel-data.html#cb107-2" tabindex="-1"></a>                  <span class="at">data=</span>ch3_p1<span class="fl">.1</span>, </span>
<span id="cb107-3"><a href="data-management---time-series-and-panel-data.html#cb107-3" tabindex="-1"></a>                  <span class="at">FUN =</span> mean <span class="co">#specifies that the mean function should be applied to the numeric column within each week</span></span>
<span id="cb107-4"><a href="data-management---time-series-and-panel-data.html#cb107-4" tabindex="-1"></a>                  )</span></code></pre></div>
<p>You will notice that this creates a separate data frame. We will merge <code>week_y</code> with <code>ch3_p1.1</code></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-management---time-series-and-panel-data.html#cb108-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="ot">&lt;-</span><span class="fu">merge</span>(ch3_p1<span class="fl">.1</span>, week_y, <span class="at">by =</span> <span class="st">&quot;week&quot;</span>, <span class="co">#ensures the merge aligns based on the week</span></span>
<span id="cb108-2"><a href="data-management---time-series-and-panel-data.html#cb108-2" tabindex="-1"></a>                <span class="at">suffixes =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>,<span class="st">&quot;_weekly&quot;</span>)) <span class="co">#adds _weekly to the column name to distinguish them from the original columns</span></span></code></pre></div>
<p>We will slightly do the same thing when aggregating by month, quarter and year. I will do the initial steps, but please do the succeeding steps on your own.</p>
</div>
<div id="aggregate-by-month" class="section level4 hasAnchor" number="7.1.7.2">
<h4><span class="header-section-number">7.1.7.2</span> Aggregate by Month<a href="data-management---time-series-and-panel-data.html#aggregate-by-month" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-management---time-series-and-panel-data.html#cb109-1" tabindex="-1"></a><span class="co"># Add a month column</span></span>
<span id="cb109-2"><a href="data-management---time-series-and-panel-data.html#cb109-2" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">format</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds, <span class="st">&quot;%Y-%m&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-management---time-series-and-panel-data.html#cb110-1" tabindex="-1"></a><span class="co"># Calculate monthly means</span></span>
<span id="cb110-2"><a href="data-management---time-series-and-panel-data.html#cb110-2" tabindex="-1"></a>month_y <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(y <span class="sc">~</span> month, <span class="at">data =</span> ch3_p1<span class="fl">.1</span>, <span class="at">FUN =</span> mean)</span></code></pre></div>
<p>Do the next steps as well as inspection on your own.</p>
</div>
<div id="aggregate-by-quarter" class="section level4 hasAnchor" number="7.1.7.3">
<h4><span class="header-section-number">7.1.7.3</span> Aggregate by Quarter<a href="data-management---time-series-and-panel-data.html#aggregate-by-quarter" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is different since we will use the <code>paste0</code> and the <code>format</code> functions. The <code>format</code> function extracts the year from the date and extracts the quarter from the date. The <code>paste0</code> combines the year and quarter without a space between them so that it results in which quarter of which year.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-management---time-series-and-panel-data.html#cb111-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="sc">$</span>quarter <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">format</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds, <span class="st">&quot;%Y&quot;</span>), <span class="st">&quot; &quot;</span>, <span class="fu">quarters</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds))</span></code></pre></div>
</div>
<div id="aggregate-by-year" class="section level4 hasAnchor" number="7.1.7.4">
<h4><span class="header-section-number">7.1.7.4</span> Aggregate by Year<a href="data-management---time-series-and-panel-data.html#aggregate-by-year" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-management---time-series-and-panel-data.html#cb112-1" tabindex="-1"></a>ch3_p1<span class="fl">.1</span><span class="sc">$</span>year<span class="ot">&lt;-</span><span class="fu">format</span>(ch3_p1<span class="fl">.1</span><span class="sc">$</span>ds, <span class="st">&quot;%Y&quot;</span>)</span></code></pre></div>
<p>Can you aggregate the Bitcoin values quarterly and yearly on your own with inspection?</p>
</div>
</div>
</div>
<div id="panel-data" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Panel Data<a href="data-management---time-series-and-panel-data.html#panel-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will use a package in R containing different datasets.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-management---time-series-and-panel-data.html#cb113-1" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span>(<span class="st">&quot;wooldridge&quot;</span> <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>]))</span>
<span id="cb113-2"><a href="data-management---time-series-and-panel-data.html#cb113-2" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;wooldridge&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-management---time-series-and-panel-data.html#cb114-1" tabindex="-1"></a><span class="fu">library</span>(wooldridge)</span>
<span id="cb114-2"><a href="data-management---time-series-and-panel-data.html#cb114-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;wagepan&quot;</span>)</span></code></pre></div>
<p>Unlike importing CSV, Excel or RData, since the data is found in a package, we call for the data through loading the package then <code>data("dataset_name")</code>. The dataset will appear in the environment.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data-management---time-series-and-panel-data.html#cb115-1" tabindex="-1"></a><span class="fu">str</span>(wagepan)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4360 obs. of  44 variables:
##  $ nr      : int  13 13 13 13 13 13 13 13 17 17 ...
##  $ year    : int  1980 1981 1982 1983 1984 1985 1986 1987 1980 1981 ...
##  $ agric   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ black   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ bus     : int  1 0 1 1 0 1 1 1 0 0 ...
##  $ construc: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ ent     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ exper   : int  1 2 3 4 5 6 7 8 4 5 ...
##  $ fin     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ hisp    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ poorhlth: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ hours   : int  2672 2320 2940 2960 3071 2864 2994 2640 2484 2804 ...
##  $ manuf   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ married : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ min     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nrthcen : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nrtheast: int  1 1 1 1 1 1 1 1 1 1 ...
##  $ occ1    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ2    : int  0 0 0 0 0 1 1 1 1 1 ...
##  $ occ3    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ4    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ5    : int  0 0 0 0 1 0 0 0 0 0 ...
##  $ occ6    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ7    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ8    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ9    : int  1 1 1 1 0 0 0 0 0 0 ...
##  $ per     : int  0 1 0 0 1 0 0 0 0 0 ...
##  $ pro     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ pub     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ rur     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ south   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ educ    : int  14 14 14 14 14 14 14 14 13 13 ...
##  $ tra     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ trad    : int  0 0 0 0 0 0 0 0 1 1 ...
##  $ union   : int  0 1 0 0 0 0 0 0 0 0 ...
##  $ lwage   : num  1.2 1.85 1.34 1.43 1.57 ...
##  $ d81     : int  0 1 0 0 0 0 0 0 0 1 ...
##  $ d82     : int  0 0 1 0 0 0 0 0 0 0 ...
##  $ d83     : int  0 0 0 1 0 0 0 0 0 0 ...
##  $ d84     : int  0 0 0 0 1 0 0 0 0 0 ...
##  $ d85     : int  0 0 0 0 0 1 0 0 0 0 ...
##  $ d86     : int  0 0 0 0 0 0 1 0 0 0 ...
##  $ d87     : int  0 0 0 0 0 0 0 1 0 0 ...
##  $ expersq : int  1 4 9 16 25 36 49 64 16 25 ...
##  - attr(*, &quot;time.stamp&quot;)= chr &quot;25 Jun 2011 23:03&quot;</code></pre>
<p>In practice, it is best to leave the raw dataset untouched. Create a copy of the dataset and that is where you do modifications.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data-management---time-series-and-panel-data.html#cb117-1" tabindex="-1"></a>ch3_p2<span class="ot">&lt;-</span>wagepan</span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-management---time-series-and-panel-data.html#cb118-1" tabindex="-1"></a><span class="fu">str</span>(ch3_p2)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4360 obs. of  44 variables:
##  $ nr      : int  13 13 13 13 13 13 13 13 17 17 ...
##  $ year    : int  1980 1981 1982 1983 1984 1985 1986 1987 1980 1981 ...
##  $ agric   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ black   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ bus     : int  1 0 1 1 0 1 1 1 0 0 ...
##  $ construc: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ ent     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ exper   : int  1 2 3 4 5 6 7 8 4 5 ...
##  $ fin     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ hisp    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ poorhlth: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ hours   : int  2672 2320 2940 2960 3071 2864 2994 2640 2484 2804 ...
##  $ manuf   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ married : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ min     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nrthcen : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nrtheast: int  1 1 1 1 1 1 1 1 1 1 ...
##  $ occ1    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ2    : int  0 0 0 0 0 1 1 1 1 1 ...
##  $ occ3    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ4    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ5    : int  0 0 0 0 1 0 0 0 0 0 ...
##  $ occ6    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ7    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ8    : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ occ9    : int  1 1 1 1 0 0 0 0 0 0 ...
##  $ per     : int  0 1 0 0 1 0 0 0 0 0 ...
##  $ pro     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ pub     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ rur     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ south   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ educ    : int  14 14 14 14 14 14 14 14 13 13 ...
##  $ tra     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ trad    : int  0 0 0 0 0 0 0 0 1 1 ...
##  $ union   : int  0 1 0 0 0 0 0 0 0 0 ...
##  $ lwage   : num  1.2 1.85 1.34 1.43 1.57 ...
##  $ d81     : int  0 1 0 0 0 0 0 0 0 1 ...
##  $ d82     : int  0 0 1 0 0 0 0 0 0 0 ...
##  $ d83     : int  0 0 0 1 0 0 0 0 0 0 ...
##  $ d84     : int  0 0 0 0 1 0 0 0 0 0 ...
##  $ d85     : int  0 0 0 0 0 1 0 0 0 0 ...
##  $ d86     : int  0 0 0 0 0 0 1 0 0 0 ...
##  $ d87     : int  0 0 0 0 0 0 0 1 0 0 ...
##  $ expersq : int  1 4 9 16 25 36 49 64 16 25 ...
##  - attr(*, &quot;time.stamp&quot;)= chr &quot;25 Jun 2011 23:03&quot;</code></pre>
<div id="sorting-panel-data" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Sorting Panel Data<a href="data-management---time-series-and-panel-data.html#sorting-panel-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We need to sort panel data so that they are ordered by individual (<code>id</code>), then <code>time</code>. This will help you when you do lags and differences.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-management---time-series-and-panel-data.html#cb120-1" tabindex="-1"></a>ch3_p2<span class="ot">&lt;-</span>ch3_p2 <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="data-management---time-series-and-panel-data.html#cb120-2" tabindex="-1"></a>  <span class="fu">arrange</span>(nr, year)</span></code></pre></div>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data-management---time-series-and-panel-data.html#cb121-1" tabindex="-1"></a><span class="fu">head</span>(ch3_p2)</span></code></pre></div>
<pre><code>##   nr year agric black bus construc ent exper fin hisp poorhlth hours manuf married min nrthcen
## 1 13 1980     0     0   1        0   0     1   0    0        0  2672     0       0   0       0
## 2 13 1981     0     0   0        0   0     2   0    0        0  2320     0       0   0       0
## 3 13 1982     0     0   1        0   0     3   0    0        0  2940     0       0   0       0
## 4 13 1983     0     0   1        0   0     4   0    0        0  2960     0       0   0       0
## 5 13 1984     0     0   0        0   0     5   0    0        0  3071     0       0   0       0
## 6 13 1985     0     0   1        0   0     6   0    0        0  2864     0       0   0       0
##   nrtheast occ1 occ2 occ3 occ4 occ5 occ6 occ7 occ8 occ9 per pro pub rur south educ tra trad
## 1        1    0    0    0    0    0    0    0    0    1   0   0   0   0     0   14   0    0
## 2        1    0    0    0    0    0    0    0    0    1   1   0   0   0     0   14   0    0
## 3        1    0    0    0    0    0    0    0    0    1   0   0   0   0     0   14   0    0
## 4        1    0    0    0    0    0    0    0    0    1   0   0   0   0     0   14   0    0
## 5        1    0    0    0    0    1    0    0    0    0   1   0   0   0     0   14   0    0
## 6        1    0    1    0    0    0    0    0    0    0   0   0   0   0     0   14   0    0
##   union    lwage d81 d82 d83 d84 d85 d86 d87 expersq
## 1     0 1.197540   0   0   0   0   0   0   0       1
## 2     1 1.853060   1   0   0   0   0   0   0       4
## 3     0 1.344462   0   1   0   0   0   0   0       9
## 4     0 1.433213   0   0   1   0   0   0   0      16
## 5     0 1.568125   0   0   0   1   0   0   0      25
## 6     0 1.699891   0   0   0   0   1   0   0      36</code></pre>
</div>
<div id="checking-panel-balance" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Checking Panel Balance<a href="data-management---time-series-and-panel-data.html#checking-panel-balance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When using panel data, checking for a balanced panel is necessary to know if every individual is observed every time period. An unbalanced panel means some individuals are missing years. This matters because many econometric assumptions rely on balance; such as <code>selection bias</code> in the sense that when you do not detect imbalance, you might miss events like firms exiting the market or respondents dropping out.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-management---time-series-and-panel-data.html#cb123-1" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">table</span>(ch3_p2<span class="sc">$</span>nr))</span></code></pre></div>
<pre><code>## 
##   8 
## 545</code></pre>
<p>From the result, we know that each of the 545 individuals were observed 8 times. For unbalanced panel, you will see an output with multiple numbers as these indicate the missing periods and individuals.</p>
<p>The <code>table(table(id))</code> tells you whether each individual has the same amount of time in the panel.</p>
</div>
<div id="creating-lagged-variables" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Creating Lagged Variables<a href="data-management---time-series-and-panel-data.html#creating-lagged-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We know that economic processes do not happen simultaneously, that is why it is important to use lags. Lags enforce causality, not correlation.</p>
<p>In panel data, lags are <em>within-individual</em>;</p>
<p>So, the question you are trying to answer here is:</p>
<p>â€œHow did this individualâ€™s past outcome affect this personâ€™s current outcome?â€</p>
<p>When using the Fixed Effects which rely on within-unit variation over time, lag adjustments are needed because without them, fixed effects would not work.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-management---time-series-and-panel-data.html#cb125-1" tabindex="-1"></a>ch3_p2<span class="ot">&lt;-</span>ch3_p2 <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="data-management---time-series-and-panel-data.html#cb125-2" tabindex="-1"></a>  <span class="fu">group_by</span>(nr) <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="data-management---time-series-and-panel-data.html#cb125-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lwage_lag =</span> <span class="fu">lag</span>(lwage))</span>
<span id="cb125-4"><a href="data-management---time-series-and-panel-data.html#cb125-4" tabindex="-1"></a><span class="fu">head</span>(ch3_p2)</span></code></pre></div>
<pre><code>## # A tibble: 6 Ã— 45
## # Groups:   nr [1]
##      nr  year agric black   bus construc   ent exper   fin  hisp poorhlth hours manuf married
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
## 1    13  1980     0     0     1        0     0     1     0     0        0  2672     0       0
## 2    13  1981     0     0     0        0     0     2     0     0        0  2320     0       0
## 3    13  1982     0     0     1        0     0     3     0     0        0  2940     0       0
## 4    13  1983     0     0     1        0     0     4     0     0        0  2960     0       0
## 5    13  1984     0     0     0        0     0     5     0     0        0  3071     0       0
## 6    13  1985     0     0     1        0     0     6     0     0        0  2864     0       0
## # â„¹ 31 more variables: min &lt;int&gt;, nrthcen &lt;int&gt;, nrtheast &lt;int&gt;, occ1 &lt;int&gt;, occ2 &lt;int&gt;,
## #   occ3 &lt;int&gt;, occ4 &lt;int&gt;, occ5 &lt;int&gt;, occ6 &lt;int&gt;, occ7 &lt;int&gt;, occ8 &lt;int&gt;, occ9 &lt;int&gt;,
## #   per &lt;int&gt;, pro &lt;int&gt;, pub &lt;int&gt;, rur &lt;int&gt;, south &lt;int&gt;, educ &lt;int&gt;, tra &lt;int&gt;, trad &lt;int&gt;,
## #   union &lt;int&gt;, lwage &lt;dbl&gt;, d81 &lt;int&gt;, d82 &lt;int&gt;, d83 &lt;int&gt;, d84 &lt;int&gt;, d85 &lt;int&gt;, d86 &lt;int&gt;,
## #   d87 &lt;int&gt;, expersq &lt;int&gt;, lwage_lag &lt;dbl&gt;</code></pre>
<p>It is important to do <code>group_by</code> because each individual has their own time line and the lags stay within individuals. Therefore, what this does is treating each individual as separate time series.</p>
</div>
<div id="missing-data-in-panels" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Missing Data in Panels<a href="data-management---time-series-and-panel-data.html#missing-data-in-panels" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-management---time-series-and-panel-data.html#cb127-1" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(ch3_p2))</span></code></pre></div>
<pre><code>##        nr      year     agric     black       bus  construc       ent     exper       fin 
##         0         0         0         0         0         0         0         0         0 
##      hisp  poorhlth     hours     manuf   married       min   nrthcen  nrtheast      occ1 
##         0         0         0         0         0         0         0         0         0 
##      occ2      occ3      occ4      occ5      occ6      occ7      occ8      occ9       per 
##         0         0         0         0         0         0         0         0         0 
##       pro       pub       rur     south      educ       tra      trad     union     lwage 
##         0         0         0         0         0         0         0         0         0 
##       d81       d82       d83       d84       d85       d86       d87   expersq lwage_lag 
##         0         0         0         0         0         0         0         0       545</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-management---time-series-and-panel-data.html#cb129-1" tabindex="-1"></a>ch3_p2<span class="fl">.1</span><span class="ot">&lt;-</span>ch3_p2 <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="data-management---time-series-and-panel-data.html#cb129-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lwage_lag))</span></code></pre></div>
</div>
<div id="creating-growth-rates" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Creating Growth Rates<a href="data-management---time-series-and-panel-data.html#creating-growth-rates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-management---time-series-and-panel-data.html#cb130-1" tabindex="-1"></a>ch3_p2 <span class="ot">&lt;-</span> ch3_p2 <span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="data-management---time-series-and-panel-data.html#cb130-2" tabindex="-1"></a>  <span class="fu">group_by</span>(nr) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="data-management---time-series-and-panel-data.html#cb130-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-4"><a href="data-management---time-series-and-panel-data.html#cb130-4" tabindex="-1"></a>    <span class="at">wg =</span> lwage <span class="sc">-</span> <span class="fu">lag</span>(lwage)</span>
<span id="cb130-5"><a href="data-management---time-series-and-panel-data.html#cb130-5" tabindex="-1"></a>  )</span>
<span id="cb130-6"><a href="data-management---time-series-and-panel-data.html#cb130-6" tabindex="-1"></a><span class="fu">head</span>(ch3_p2<span class="sc">$</span>wg, <span class="dv">10</span>) <span class="co">#due to number of cols, chose the one we just created and specified 10 observations</span></span></code></pre></div>
<pre><code>##  [1]          NA  0.65551984 -0.50859833  0.08875167  0.13491178  0.13176584 -2.42015356
##  [8]  2.38945049          NA -0.15756428</code></pre>
<p>What we did was create <em>within-individual wage growth over time</em>.</p>
<p>Remember our discussion on lag?</p>
<p>It will answer: â€œHow much did this individualâ€™s wage change from the previous period?â€</p>
<p>Furthermore, we are doing dynamic analysis here. We also note that the first observation per person has no lag.</p>
</div>
</div>
<div id="closing-1" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Closing<a href="data-management---time-series-and-panel-data.html#closing-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Quiz questions will be uploaded in Animospace.</li>
<li>You have 15 minutes to answer.</li>
<li>Clean the environment and free the memory AFTER the quiz.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-management---cross-sectional-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["LBOMETR_Course_Book.pdf", "LBOMETR_Course_Book.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "depth": 4
  }
});
});
</script>

</body>

</html>
